===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _Probe_Variables]
variable_probe_attached = False
variable_probe_state = False
variable_probe_lock = False
variable_probe_z_homed = False
variable_z_endstop_x = 0
variable_z_endstop_y = 0
gcode = 

[gcode_macro _klicky_check_variables_version]
gcode = 
	{% set version = printer["gcode_macro _User_Variables"].version|default(0) %}
	
	{% if version != 1 %}
	{ action_raise_error("Please update your klicky variables, there are some functionality changes") }
	{% endif %}

[gcode_macro _KlickyDebug]
gcode = 
	{% set message  = params.MSG %}
	{% set debug = printer["gcode_macro _User_Variables"].debug|default(False) %}
	
	{% if debug %}
	{ action_respond_info(message) }
	{% endif %}

[gcode_macro _exit_point]
gcode = 
	{% set function  = 'pre_' ~ params.FUNCTION %}
	{% set move  = params.MOVE|default(0) %}
	{% set speed = printer["gcode_macro _User_Variables"].travel_speed %}
	
	
	M400
	SET_VELOCITY_LIMIT ACCEL={printer.configfile.settings.printer.max_accel}
	SET_VELOCITY_LIMIT ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	RESTORE_GCODE_STATE NAME={function} MOVE={move} MOVE_SPEED={speed}

[gcode_macro _entry_point]
gcode = 
	{% set function  = 'pre_' ~ params.FUNCTION %}
	{% set move_accel = printer["gcode_macro _User_Variables"].move_accel|default(1000) %}
	
	M400
	SAVE_GCODE_STATE NAME={function}
	
	SET_GCODE_OFFSET Z=0
	
	G90
	
	SET_VELOCITY_LIMIT ACCEL={move_accel}

[gcode_macro _Homing_Variables]
gcode = 
	{% set reset  = params.RESET|default(0) %}
	{% if reset %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_lock VALUE={ False }
	{% endif %}

[gcode_macro Attach_Probe_Lock]
description = Attaches Klicky Probe, can only be docked after unlocking
gcode = 
	Attach_Probe
	_Probe_Lock

[gcode_macro Dock_Probe_Unlock]
description = Docks Klicky Probe even if it was locked
gcode = 
	_Probe_Unlock
	Dock_Probe

[gcode_macro _Probe_Unlock]
description = Unlocks Klicky Probe state
gcode = 
	_KlickyDebug msg="_Probe_Lock setting probe_lock variable to False"
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_lock VALUE={ False }

[gcode_macro _Probe_Lock]
description = Locks Klicky Probe state
gcode = 
	_KlickyDebug msg="_Probe_Lock setting probe_lock variable to True"
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_lock VALUE={ True }

[gcode_macro _DeployKlickyDock]
description = Deploys Klicky servo-controlled dock
gcode = 
	{% set enable_dock_servo = printer["gcode_macro _User_Variables"].enable_dock_servo|default(False) %}
	{% set servo_delay = printer["gcode_macro _User_Variables"].servo_delay|default(1000) %}
	{% set servo_name = printer["gcode_macro _User_Variables"].servo_name %}
	{% set servo_deploy = printer["gcode_macro _User_Variables"].servo_deploy|default(360) %}
	
	
	M400
	{% if enable_dock_servo != False %}
	_KlickyDebug msg="_DeployKlickyDock Klicky servo configuration enabled"
	{% if servo_deploy == 360 %}
	{ action_raise_error("Klicky: servo active on klicky-variables, but no servo deploy angle specified") }
	{% endif %}
	_KlickyDebug msg="_DeployKlickyDock SET_SERVO SERVO={servo_name|string} ANGLE={servo_deploy|int}"
	SET_SERVO SERVO={servo_name|string} ANGLE={servo_deploy|int}
	M400
	G4 P{servo_delay|int}
	_KlickyDebug msg="_DeployKlickyDock SET_SERVO SERVO={servo_name|string} WIDTH=0"
	SET_SERVO SERVO={servo_name|string} WIDTH=0
	{% elif printer["gcode_macro _DeployDock"] is defined %}
	_KlickyDebug msg="_DeployKlickyDock calling _DeployDock"
	_DeployDock
	{% endif %}

[gcode_macro _RetractKlickyDock]
description = Retracts Klicky servo-controlled dock
gcode = 
	{% set enable_dock_servo = printer["gcode_macro _User_Variables"].enable_dock_servo|default(False) %}
	{% set servo_delay = printer["gcode_macro _User_Variables"].servo_delay|default(1000) %}
	{% set servo_name = printer["gcode_macro _User_Variables"].servo_name %}
	{% set servo_retract = printer["gcode_macro _User_Variables"].servo_retract|default(360) %}
	
	
	M400
	{% if enable_dock_servo != False %}
	_KlickyDebug msg="_RetractKlickyDock Klicky servo configuration enabled"
	{% if servo_retract == 360 %}
	{ action_raise_error("Klicky: servo active on klicky-variables, but no servo retract angle specified") }
	{% endif %}
	_KlickyDebug msg="_RetractKlickyDock SET_SERVO SERVO={servo_name|string} ANGLE={servo_retract|int}"
	SET_SERVO SERVO={servo_name|string} ANGLE={servo_retract|int}
	M400
	G4 P{servo_delay|int}
	_KlickyDebug msg="_RetractKlickyDock SET_SERVO SERVO={servo_name|string} WIDTH=0"
	SET_SERVO SERVO={servo_name|string} WIDTH=0
	{% elif printer["gcode_macro _RetractDock"] is defined %}
	_KlickyDebug msg="_RetractKlickyDock calling _RetractDock"
	_RetractDock
	{% endif %}

[gcode_macro Attach_Probe]
description = Attaches Klicky Probe
gcode = 
	
	{% set goback  = params.BACK|default(0) %}
	
	{% set probe_attached = printer["gcode_macro _Probe_Variables"].probe_attached %}
	{% set probe_lock = printer["gcode_macro _Probe_Variables"].probe_lock %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	{% set dockmove_x = printer["gcode_macro _User_Variables"].dockmove_x|default(0) %}
	{% set dockmove_y = printer["gcode_macro _User_Variables"].dockmove_y|default(0) %}
	{% set dockmove_z = printer["gcode_macro _User_Variables"].dockmove_z|default(0) %}
	{% set docklocation_x = printer["gcode_macro _User_Variables"].docklocation_x %}
	{% set docklocation_y = printer["gcode_macro _User_Variables"].docklocation_y %}
	{% set docklocation_z = printer["gcode_macro _User_Variables"].docklocation_z %}
	{% set attachmove_x = printer["gcode_macro _User_Variables"].attachmove_x|default(0) %}
	{% set attachmove_y = printer["gcode_macro _User_Variables"].attachmove_y|default(0) %}
	{% set attachmove_z = printer["gcode_macro _User_Variables"].attachmove_z|default(0) %}
	{% set attachmove2_x = printer["gcode_macro _User_Variables"].attachmove2_x|default(0) %}
	{% set attachmove2_y = printer["gcode_macro _User_Variables"].attachmove2_y|default(0) %}
	{% set attachmove2_z = printer["gcode_macro _User_Variables"].attachmove2_z|default(0) %}
	
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z %}
	{% set enable_z_hop = printer["gcode_macro _User_Variables"].enable_z_hop %}
	
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set dock_feedrate = printer["gcode_macro _User_Variables"].dock_speed * 60 %}
	{% set release_feedrate = printer["gcode_macro _User_Variables"].release_speed * 60 %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set bypass_probe_docking = printer["gcode_macro _User_Variables"].bypass_probe_docking|default(False) %}
	
	_entry_point function=Attach_Probe
	
	{% if bypass_probe_docking == False %}
	
	
	{% if not 'xy' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X and Y Axis First!") }
	_KlickyDebug msg="Attach_Probe Axis homed"
	
	
	{% elif not probe_attached and not probe_lock %}
	_KlickyDebug msg="Attach_Probe going to attach probe"
	{% if verbose %}
	{ action_respond_info("Attaching Probe") }
	{% endif %}
	_KLICKY_STATUS_BUSY
	
	{% if not 'z' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Resetting Z position to zero") }
	{% endif %}
	_KlickyDebug msg="Attach_Probe Z not homed, setting position as X=Y=Z=0"
	SET_KINEMATIC_POSITION Z=0
	{% if not enable_z_hop %}
	_KlickyDebug msg="Attach_Probe z_hop disabled"
	{% set safe_z = 0 %}
	{% endif %}
	{% endif %}
	
	
	
	{% if printer.gcode_move.gcode_position.z < safe_z %}
	_KlickyDebug msg="Attach_Probe toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	{% if not 'z' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Resetting Z position to zero, duplicate?") }
	{% endif %}
	_KlickyDebug msg="Attach_Probe Z not homed, setting position as X=Y=Z=0"
	SET_KINEMATIC_POSITION Z=0
	{% endif %}
	
	{% if printer.gcode_move.gcode_position.z < safe_z %}
	_KlickyDebug msg="Attach_Probe toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_Umbilical_Path
	
	_entry_point function=Attach_Probe_intern
	
	
	_KlickyDebug msg="Attach_Probe moving near the dock with G0 X{docklocation_x|int - attachmove_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove_y|int - attachmove2_y} F{travel_feedrate}"
	G0 X{docklocation_x|int - attachmove_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove_y|int - attachmove2_y} F{travel_feedrate}
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving near the dock with G0 Z{docklocation_z|int - attachmove_z|int - attachmove2_z|int} F{dock_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int - attachmove2_z|int} F{dock_feedrate}
	_KlickyDebug msg="Attach_Probe moving near the dock with G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}
	{% endif %}
	
	_DeployKlickyDock
	
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 Z{docklocation_z} F{dock_feedrate}"
	G0 Z{docklocation_z} F{dock_feedrate}
	{% endif %}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 X{docklocation_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove2_y} F{dock_feedrate}"
	G0 X{docklocation_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove2_y} F{dock_feedrate}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}"
	G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving from the dock to G0 Z{docklocation_z|int - attachmove_z|int} F{z_drop_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int} F{z_drop_feedrate}
	{% endif %}
	_KlickyDebug msg="Attach_Probe moving from the dock to G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{release_feedrate}"
	G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{release_feedrate}
	
	_RetractKlickyDock
	
	{% if ((printer.gcode_move.gcode_position.z < safe_z) or (docklocation_z != -128 and docklocation_z < safe_z ))%}
	_KlickyDebug msg="Attach_Probe moving to a safe Z position: G0 Z{safe_z} F{z_drop_feedrate} from {printer.gcode_move.gcode_position.z}"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_Park_Toolhead
	
	_CheckProbe action=attach
	
	_exit_point function=Attach_Probe_intern move={goback}
	_KLICKY_STATUS_READY
	
	{% elif probe_lock %}
	{% if verbose %}
	{ action_respond_info("Probe locked!") }
	{% endif %}
	
	
	_KlickyDebug msg="Attach_Probe probe locked not attaching probe"
	_CheckProbe action=query
	
	{% else %}
	{% if verbose %}
	{ action_respond_info("Probe already attached!") }
	{% endif %}
	
	
	_KlickyDebug msg="Attach_Probe probe already attached, doing nothing"
	_CheckProbe action=query
	
	{% endif %}
	
	_exit_point function=Attach_Probe
	{% else %}
	_KlickyDebug msg="Attach_Probe probe docking bypassed, doing nothing"
	{% endif %}

[gcode_macro Dock_Probe]
description = Docks Klicky Probe
gcode = 
	
	{% set goback  = params.BACK|default(0) %}
	
	{% set probe_attached = printer["gcode_macro _Probe_Variables"].probe_attached %}
	{% set probe_lock = printer["gcode_macro _Probe_Variables"].probe_lock %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	{% set dockmove_x = printer["gcode_macro _User_Variables"].dockmove_x|default(0) %}
	{% set dockmove_y = printer["gcode_macro _User_Variables"].dockmove_y|default(0) %}
	{% set dockmove_z = printer["gcode_macro _User_Variables"].dockmove_z|default(0) %}
	{% set docklocation_x = printer["gcode_macro _User_Variables"].docklocation_x %}
	{% set docklocation_y = printer["gcode_macro _User_Variables"].docklocation_y %}
	{% set docklocation_z = printer["gcode_macro _User_Variables"].docklocation_z %}
	{% set attachmove_x = printer["gcode_macro _User_Variables"].attachmove_x|default(0) %}
	{% set attachmove_y = printer["gcode_macro _User_Variables"].attachmove_y|default(0) %}
	{% set attachmove_z = printer["gcode_macro _User_Variables"].attachmove_z|default(0) %}
	
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set dock_feedrate = printer["gcode_macro _User_Variables"].dock_speed * 60 %}
	{% set release_feedrate = printer["gcode_macro _User_Variables"].release_speed * 60 %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set bypass_probe_docking = printer["gcode_macro _User_Variables"].bypass_probe_docking|default(False) %}
	{% if bypass_probe_docking == True %}
	_KlickyDebug msg="Attach_Probe probe docking bypassed, doing nothing"
	{% endif %}
	
	{% if bypass_probe_docking != True %}
	_entry_point function=Dock_Probe
	
	
	{% if probe_attached and not probe_lock %}
	_KLICKY_STATUS_BUSY
	{% if printer.gcode_move.gcode_position.z < safe_z %}
	_KlickyDebug msg="Dock_Probe toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	_Umbilical_Path
	
	
	_KlickyDebug msg="Dock_Probe moving near the dock with G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{travel_feedrate}"
	G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{travel_feedrate}
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Dock_Probe moving near the dock with G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}
	{% endif %}
	
	
	_DeployKlickyDock
	
	
	_KlickyDebug msg="Dock_Probe moving to the dock with G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}"
	
	G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 Z{docklocation_z} F{dock_feedrate}"
	G0 Z{docklocation_z} F{dock_feedrate}
	{% endif %}
	
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Dock_Probe moving from the dock to G0 Z{docklocation_z|int + dockmove_z|int} F{release_feedrate}"
	G0 Z{docklocation_z|int + dockmove_z|int} F{release_feedrate}
	{% endif %}
	
	_KlickyDebug msg="Dock_Probe moving from the dock to G0 X{docklocation_x|int + dockmove_x|int} Y{docklocation_y|int + dockmove_y|int} F{release_feedrate}"
	G0 X{docklocation_x|int + dockmove_x|int} Y{docklocation_y|int + dockmove_y|int} F{release_feedrate}
	
	
	_RetractKlickyDock
	
	
	_KlickyDebug msg="Dock_Probe moving away from the dock to G0 X{docklocation_x|int + dockmove_x|int - attachmove_x|int} Y{docklocation_y|int + dockmove_y|int - attachmove_y|int} F{release_feedrate}"
	G0 X{docklocation_x|int + dockmove_x|int - attachmove_x|int} Y{docklocation_y|int + dockmove_y|int - attachmove_y|int} F{release_feedrate}
	
	
	{% if (printer.gcode_move.gcode_position.z < safe_z) %}
	_KlickyDebug msg="Dock_Probe moving to a safe Z position: G0 Z{safe_z} F{z_drop_feedrate} from {printer.gcode_move.gcode_position.z}"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_Park_Toolhead
	
	G4 P1000
	_CheckProbe action=dock
	_KLICKY_STATUS_READY
	
	{% elif probe_lock %}
	{% if verbose %}
	{ action_respond_info("Probe locked") }
	{% endif %}
	
	
	_KlickyDebug msg="Dock_Probe probe locked not docking probe"
	_CheckProbe action=query
	
	{% else %}
	{% if verbose %}
	{ action_respond_info("Probe already docked") }
	{% endif %}
	
	
	_KlickyDebug msg="Dock_Probe probe already docked, doing nothing"
	_CheckProbe action=query
	
	{% endif %}
	
	_exit_point function=Dock_Probe move={goback}
	{% else %}
	_KlickyDebug msg="Dock_Probe probe docking bypassed, doing nothing"
	{% endif %}

[gcode_macro PROBE_CALIBRATE]
rename_existing = _PROBE_CALIBRATE
description = Calibrate the probes z_offset with klicky automount
gcode = 
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set max_x = printer["gcode_macro _User_Variables"].max_bed_x|float %}
	{% set max_y = printer["gcode_macro _User_Variables"].max_bed_y|float %}
	{% set probe_offset_x = printer['configfile'].config["probe"]["x_offset"]|float %}
	{% set probe_offset_y = printer['configfile'].config["probe"]["y_offset"]|float %}
	{% set bypass_probe_docking = printer["gcode_macro _User_Variables"].bypass_probe_docking|default(False) %}
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X, Y and Z Axis First!") }
	{% endif %}
	_KlickyDebug msg="probe_calibrate Axis homed"
	_KlickyDebug msg="probe_calibrate Variables max_x={max_x},max_y={max_y},probe_offset_x={probe_offset_x},probe_offset_y={probe_offset_y}"
	
	
	{% if printer['gcode_move'].position.y > (max_y - probe_offset_y)
	or printer['gcode_move'].position.y < - probe_offset_y
	or printer['gcode_move'].position.x > (max_x - probe_offset_x)
	or printer['gcode_move'].position.x < - probe_offset_x %}
	{ action_raise_error("Must perform PROBE_CALIBRATE with the probe above the BED, check klicky_variables bed size!") }
	{% endif %}
	
	{% if bypass_probe_docking == False %}
	_CheckProbe action=query
	G90
	Attach_Probe back=1
	_KLICKY_STATUS_CALIBRATING_Z
	
	_KlickyDebug msg="probe_calibrate calling klipper probe_calibrate"
	_PROBE_CALIBRATE {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	M118 moving the toolhead 20 mm from the bed
	_KlickyDebug msg="probe_calibrate Moving Z up by 20mm"
	TESTZ Z=20
	M118 remove manually the probe and continue calibration
	_KLICKY_STATUS_READY
	{% else %}
	_KLICKY_STATUS_CALIBRATING_Z
	_KlickyDebug msg="probe_calibrate calling klipper probe_calibrate"
	_PROBE_CALIBRATE {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	_KLICKY_STATUS_READY
	{% endif %}

[gcode_macro PROBE_ACCURACY]
rename_existing = _PROBE_ACCURACY
description = Probe Z-height accuracy at current XY position with klicky automount
gcode = 
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set max_x = printer["gcode_macro _User_Variables"].max_bed_x|float %}
	{% set max_y = printer["gcode_macro _User_Variables"].max_bed_y|float %}
	{% set probe_offset_x = printer['configfile'].config["probe"]["x_offset"]|float %}
	{% set probe_offset_y = printer['configfile'].config["probe"]["y_offset"]|float %}
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X, Y and Z Axis First!") }
	{% endif %}
	_KlickyDebug msg="probe_accuracy Axis homed"
	_KlickyDebug msg="probe_accuracy Variables max_x={max_x},max_y={max_y},probe_offset_x={probe_offset_x},probe_offset_y={probe_offset_y}"
	
	_entry_point function=PROBE_ACCURACY
	
	
	{% if printer['gcode_move'].position.y > (max_y - probe_offset_y)
	or printer['gcode_move'].position.y < - probe_offset_y
	or printer['gcode_move'].position.x > (max_x - probe_offset_x)
	or printer['gcode_move'].position.x < - probe_offset_x %}
	{ action_raise_error("Must perform PROBE_ACCURACY with the probe above the BED, check klicky_variables bed size!") }
	{% endif%}
	
	_CheckProbe action=query
	Attach_Probe back=1
	
	_KlickyDebug msg="probe_accuracy calling klipper probe accuracy"
	_PROBE_ACCURACY {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	Dock_Probe back=1
	
	_exit_point function=PROBE_ACCURACY move=1

[force_move]
enable_force_move = True

[homing_override]
axes = xyz
gcode = 
	
	_User_Variables
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z %}
	{% set enable_z_hop = printer["gcode_macro _User_Variables"].enable_z_hop %}
	{% set kinematic_z = 0 %}
	{% set dock_on_zhome = printer["gcode_macro _User_Variables"].dock_on_zhome|default(True) %}
	{% set attachmove_x = printer["gcode_macro _User_Variables"].attachmove_x|default(0) %}
	{% set attachmove_y = printer["gcode_macro _User_Variables"].attachmove_y|default(0) %}
	{% set attachmove_z = printer["gcode_macro _User_Variables"].attachmove_z|default(0) %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set home_backoff_x = printer["gcode_macro _User_Variables"].home_backoff_x|default(0) %}
	{% set home_backoff_y = printer["gcode_macro _User_Variables"].home_backoff_y|default(0) %}
	{% set override_homing = printer["gcode_macro _User_Variables"].override_homing|default('') %}
	
	
	_klicky_check_variables_version
	
	_CheckProbe action=query
	
	
	{% set home_x, home_y, home_z, leave_probe_attached = False, False, False, False %}
	
	{% if 'PROBE_LOCK' in params%}
	{% if verbose %}
	{ action_respond_info("PROBE_LOCK = True") }
	{% endif %}
	{% set leave_probe_attached = True %}
	{% endif %}
	
	
	{% if not 'X' in params
	and not 'Y' in params
	and not 'Z' in params %}
	
	{% set home_x, home_y, home_z = True, True, True %}
	_KlickyDebug msg="homing_override goint to home all axes"
	
	{% else %}
	{% if 'X' in params %}
	{% set home_x = True %}
	_KlickyDebug msg="homing_override goint to home X"
	
	{% endif %}
	
	{% if 'Y' in params %}
	{% set home_y = True %}
	_KlickyDebug msg="homing_override goint to home Y"
	{% endif %}
	
	{% if 'Z' in params %}
	{% set home_z = True %}
	_KlickyDebug msg="homing_override goint to home Z"
	{% endif %}
	
	{% if 'X' in params
	and 'Y' in params
	and 'Z' in params %}
	
	
	_Homing_Variables reset=1
	_KlickyDebug msg="homing_override goint to home all axes"
	{% endif %}
	
	{% endif %}
	
	_entry_point function=homing_override
	_KLICKY_STATUS_HOMING
	
	
	{% if 'z' not in printer.toolhead.homed_axes %}
	{% if enable_z_hop == False %}
	_KlickyDebug msg="homing_override z_hop disabled"
	
	{% set kinematic_z = safe_z %}
	{% set safe_z = safe_z %}
	{% endif %}
	{% endif %}
	
	
	{% if 'x' not in printer.toolhead.homed_axes and 'y' not in printer.toolhead.homed_axes and 'z' not in printer.toolhead.homed_axes%}
	{% if verbose %}
	{ action_respond_info("No axis homed") }
	{% endif %}
	_KlickyDebug msg="homing_override no axis homed, setting position as X=Y=0 Z={kinematic_z}"
	SET_KINEMATIC_POSITION X=0 Y=0 Z={kinematic_z}
	M400
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% if home_z != True %}
	_KlickyDebug msg="homing_override clearing axis homed state if not already homing Z"
	M84
	{% endif %}
	{% endif %}
	
	{% if home_z %}
	{% if 'x' not in printer.toolhead.homed_axes and 'y' not in printer.toolhead.homed_axes%}
	{% if verbose %}
	{ action_respond_info("X or Y not homed, forcing full G28") }
	{% endif %}
	{% set home_x, home_y, home_z = True, True, True %}
	{% endif %}
	{% endif %}
	
	
	{% if ((attachmove_y == 0 and override_homing == '' ) or (override_homing == 'Y'))%}
	
	{% if home_y %}
	{% if override_homing == 'Y' %}
	_KlickyDebug msg="homing_override Y homing first override, due to override_homing = Y"
	{% else %}
	_KlickyDebug msg="homing_override Y homing first override, due to attachmove_y = 0"
	{% endif %}
	{% if verbose %}
	{ action_respond_info("Homing Y") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in Y homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	{% if printer["gcode_macro _HOME_Y"] is defined %}
	_KlickyDebug msg="homing_override calling _HOME_Y external script to handle the Y homing"
	_HOME_Y
	{% else %}
	_KlickyDebug msg="homing_override Homing Y G28 Y0"
	G28 Y0
	
	{% if home_backoff_y != 0 %}
	{% if (printer.configfile.settings.stepper_y.position_endstop > (printer.configfile.settings.stepper_y.position_min|default(0) + printer.configfile.settings.stepper_y.position_max)/2) %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop-home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop - home_backoff_y|int} F{travel_feedrate}
	{% else %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}
	{%endif %}
	{%endif %}
	{% endif %}
	{% endif %}
	{% set home_y = False %}
	{% endif %}
	
	
	
	{% if home_x %}
	{% if verbose %}
	{ action_respond_info("Homing X") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in X homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	{% if printer["gcode_macro _HOME_X"] is defined %}
	_KlickyDebug msg="homing_override calling _HOME_X external script to handle the X homing"
	_HOME_X
	{% else %}
	_KlickyDebug msg="homing_override Homing X, G28 X0"
	G28 X0
	
	{% if home_backoff_x != 0 %}
	{% if (printer.configfile.settings.stepper_x.position_endstop > (printer.configfile.settings.stepper_x.position_min|default(0) + printer.configfile.settings.stepper_x.position_max)/2) %}
	_KlickyDebug msg="homing_override backing off X endstop, G0 X{printer.configfile.settings.stepper_x.position_endstop - home_backoff_x|int} F{travel_feedrate}"
	G0 X{printer.configfile.settings.stepper_x.position_endstop - home_backoff_x|int} F{travel_feedrate}
	{% else %}
	_KlickyDebug msg="homing_override backing off X endstop, G0 X{printer.configfile.settings.stepper_x.position_endstop + home_backoff_x|int} F{travel_feedrate}"
	G0 X{printer.configfile.settings.stepper_x.position_endstop + home_backoff_x|int} F{travel_feedrate}
	{%endif %}
	{%endif %}
	{% endif %}
	{% endif %}
	
	
	{% if home_y %}
	{% if verbose %}
	{ action_respond_info("Homing Y") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in Y homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	{% if printer["gcode_macro _HOME_Y"] is defined %}
	_KlickyDebug msg="homing_override calling _HOME_Y external script to handle the Y homing"
	_HOME_Y
	{% else %}
	_KlickyDebug msg="homing_override Homing Y, G28 Y0"
	G28 Y0
	{% if home_backoff_y != 0 %}
	{% if (printer.configfile.settings.stepper_y.position_endstop > (printer.configfile.settings.stepper_y.position_min|default(0) + printer.configfile.settings.stepper_y.position_max)/2) %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop - home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop - home_backoff_y|int} F{travel_feedrate}
	{% else %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}
	{%endif %}
	{%endif %}
	{% endif %}
	{% endif %}
	
	{% if home_z %}
	{% if verbose %}
	{ action_respond_info("Homing Z") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in Y homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	
	{% if 'z_virtual_endstop' in printer['configfile'].config["stepper_z"]["endstop_pin"] %}
	_KlickyDebug msg="homing_override probe configured as a virtual Z endstop attaching probe"
	Attach_Probe
	
	{% if leave_probe_attached %}
	_Probe_Lock
	{% endif %}
	{% elif dock_on_zhome == True %}
	Dock_Probe
	{% endif %}
	
	_Home_Z_
	
	
	{% if 'z_virtual_endstop' in printer['configfile'].config["stepper_z"]["endstop_pin"] %}
	_KlickyDebug msg="homing_override probe no longer required, docking probe"
	Dock_Probe
	{% elif dock_on_zhome == False %}
	Dock_Probe
	{% endif %}
	{% endif %}
	_CheckProbe action=query
	
	
	_Park_Toolhead
	
	_exit_point function=homing_override
	_KLICKY_STATUS_READY

[gcode_macro _Umbilical_Path]
gcode = 
	{% set umbilical = printer["gcode_macro _User_Variables"].umbilical %}
	{% set umbilical_x = printer["gcode_macro _User_Variables"].umbilical_x %}
	{% set umbilical_y = printer["gcode_macro _User_Variables"].umbilical_y %}
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	
	{% if umbilical %}
	
	_entry_point function=Umbilical_Path
	
	_KlickyDebug msg="_Umbilical_Path moving to G0 X{umbilical_x} Y{umbilical_y} Z{safe_z} F{travel_feedrate}"
	G0 X{umbilical_x} Y{umbilical_y} Z{safe_z} F{travel_feedrate}
	
	_exit_point function=Umbilical_Path
	{% endif %}

[gcode_macro _Home_Z_]
gcode = 
	{% set z_endstop_x = printer["gcode_macro _Probe_Variables"].z_endstop_x %}
	{% set z_endstop_y = printer["gcode_macro _Probe_Variables"].z_endstop_y %}
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}    {% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	_entry_point function=Home_Z
	
	
	{% if not 'xy' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X and Y Axis First!") }
	{% else %}
	_KlickyDebug msg="_Home_Z_ XY Axis homed"
	{% if not 'z' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Resetting Z position to zero") }
	{% endif %}
	_KlickyDebug msg="_Home_Z_ Z not homed, setting position as X=Y=Z=0"
	SET_KINEMATIC_POSITION Z=0
	{% endif %}
	
	
	
	_KlickyDebug msg="_Home_Z_ moving to Z endstop position G0 X{z_endstop_x} Y{z_endstop_y} F{travel_feedrate}"
	G0 X{z_endstop_x} Y{z_endstop_y} F{travel_feedrate}
	_KlickyDebug msg="_Home_Z_ Homing Z G28 Z"
	G28 Z0
	_KlickyDebug msg="_Home_Z_ toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_exit_point function=Home_Z

[gcode_macro _CheckProbe]
variable_probe_state = 0
gcode = 
	Query_Probe
	_SetProbeState action={ params.ACTION }

[gcode_macro _SetProbeState]
gcode = 
	{% set query_probe_triggered = printer.probe.last_query %}
	{% set action  = params.ACTION|default('') %}
	
	
	{% if query_probe_triggered %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_attached VALUE={ False }
	{% else %}
	
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_attached VALUE={ True }
	{% endif %}
	
	{% if action == 'query' %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_state VALUE={ query_probe_triggered }
	{% endif %}
	
	
	
	
	{% if not query_probe_triggered and action == 'dock' %}
	{ action_raise_error("Probe dock failed!") }
	{% endif %}
	
	
	{% if query_probe_triggered and action == 'attach' %}
	{ action_raise_error("Probe attach failed!") }
	{% endif %}

[gcode_macro _Park_Toolhead]
gcode = 
	{% set park_toolhead = printer["gcode_macro _User_Variables"].park_toolhead %}
	{% set parkposition_x = printer["gcode_macro _User_Variables"].parkposition_x %}
	{% set parkposition_y = printer["gcode_macro _User_Variables"].parkposition_y %}
	{% set parkposition_z = printer["gcode_macro _User_Variables"].parkposition_z %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	_entry_point function=Park_Toolhead
	
	{% if park_toolhead and 'xyz' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Parking Toolhead") }
	{% endif %}
	{% if parkposition_z == -128 %}
	_KlickyDebug msg="_Park_Toolhead moving to G0 X{parkposition_x} Y{parkposition_y} F{travel_feedrate}"
	G0 X{parkposition_x} Y{parkposition_y} F{travel_feedrate}
	
	{% else %}
	
	_KlickyDebug msg="_Park_Toolhead moving to G0 X{parkposition_x} Y{parkposition_y} Z{parkposition_z} F{travel_feedrate}"
	G0 X{parkposition_x} Y{parkposition_y} Z{parkposition_z} F{travel_feedrate}
	
	{% endif %}
	
	{% endif %}
	_exit_point function=Park_Toolhead

[gcode_macro _klicky_status_ready]
gcode = 
	{% if printer['gcode_macro status_ready'] is defined %}
	_KlickyDebug msg="_klicky_status_ready activating the LED STATUS_READY"
	STATUS_READY
	{% endif %}

[gcode_macro _klicky_status_busy]
gcode = 
	{% if printer['gcode_macro status_busy'] is defined %}
	_KlickyDebug msg="_klicky_status_busy activating the LED STATUS_BUSY"
	STATUS_BUSY
	{% endif %}

[gcode_macro _klicky_status_leveling]
gcode = 
	{% if printer['gcode_macro status_leveling'] is defined %}
	_KlickyDebug msg="_klicky_status_leveling activating the LED STATUS_LEVELING"
	STATUS_LEVELING
	{% endif %}

[gcode_macro _klicky_status_homing]
gcode = 
	{% if printer['gcode_macro status_homing'] is defined %}
	_KlickyDebug msg="_klicky_status_homing activating the LED STATUS_HOMING"
	STATUS_HOMING
	{% endif %}

[gcode_macro _klicky_status_cleaning]
gcode = 
	{% if printer['gcode_macro status_cleaning'] is defined %}
	_KlickyDebug msg="_klicky_status_cleaning activating the LED STATUS_CLEANING"
	STATUS_CLEANING
	{% endif %}

[gcode_macro _klicky_status_meshing]
gcode = 
	{% if printer['gcode_macro status_meshing'] is defined %}
	_KlickyDebug msg="_klicky_status_meshing activating the LED STATUS_MESHING"
	STATUS_MESHING
	{% endif %}

[gcode_macro _klicky_status_calibrating_z]
gcode = 
	{% if printer['gcode_macro status_calibrating_z'] is defined %}
	_KlickyDebug msg="_klicky_status_calibrating_z activating the LED STATUS_CALIBRATING_Z"
	STATUS_CALIBRATING_Z
	{% endif %}

[z_calibration]
nozzle_xy_position = 172, 301
switch_xy_position = 171.5, 282
bed_xy_position = 150, 150
switch_offset = 0.09
offset_margins = -1.0,1.0
speed = 50
probing_first_fast = false
start_gcode = Attach_Probe
end_gcode = Dock_Probe

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_28003C001150535556323420-if00
restart_method = command

[printer]
kinematics = corexy
max_velocity = 300
max_accel = 3000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[stepper_x]
step_pin = PF13
dir_pin = PF12
enable_pin = !PF14
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 400
endstop_pin = ^PG6
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_x]
uart_pin = PC4
interpolate = False
run_current = 0.8
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_y]
step_pin = PG0
dir_pin = PG1
enable_pin = !PF15
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 400
endstop_pin = PG9
position_min = 0
position_endstop = 300
position_max = 303.5
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_y]
uart_pin = PD11
interpolate = False
run_current = 0.8
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z]
step_pin = PF11
dir_pin = !PG3
enable_pin = !PG5
rotation_distance = 4
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PG10
position_max = 290
position_min = -4.5
homing_speed = 8.0
second_homing_speed = 3
homing_retract_dist = 3
position_endstop = -0.711

[tmc2209 stepper_z]
uart_pin = PC6
interpolate = False
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG4
dir_pin = !PC1
enable_pin = !PA0
rotation_distance = 4
microsteps = 32
full_steps_per_rotation = 200

[tmc2209 stepper_z1]
uart_pin = PC7
interpolate = False
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PF9
dir_pin = !PF10
enable_pin = !PG2
rotation_distance = 4
microsteps = 32
full_steps_per_rotation = 200

[tmc2209 stepper_z2]
uart_pin = PF2
interpolate = False
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[extruder]
step_pin = PC13
dir_pin = PF0
enable_pin = !PF1
rotation_distance = 21.9459674016
gear_ratio = 50:10
microsteps = 32
full_steps_per_rotation = 200
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PA1
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PF4
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 170
pressure_advance = 0.05
pressure_advance_smooth_time = 0.040
control = pid
pid_kp = 26.572
pid_ki = 2.036
pid_kd = 86.691

[tmc2209 extruder]
uart_pin = PE4
interpolate = false
run_current = 0.5
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PA2
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PF3
max_power = 1
min_temp = 0
max_temp = 120
control = pid
pid_kp = 55.196
pid_ki = 2.091
pid_kd = 364.295

[probe]
pin = PG15
x_offset = 0
y_offset = 25.0
z_offset = 0
speed = 10.0
samples = 5
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.006
samples_tolerance_retries = 6

[fan]
pin = PA8
kick_start_time = 0.5
off_below = 0.10

[heater_fan hotend_fan]
pin = PE5
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 50.0

[controller_fan controller_fan]
pin = PD12
kick_start_time = 0.5
heater = heater_bed

[heater_fan exhaust_fan]
pin = PD13
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 5.0
heater = heater_bed
heater_temp = 60
fan_speed = 1.0

[output_pin caselight]
pin = PD15
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[neopixel headlight]
pin = PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.2157
initial_blue = 1.0
initial_white = 0.0

[temperature_sensor chamber_temp]
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PF5
min_temp = 0
max_temp = 100
gcode_id = chamber_th

[idle_timeout]
timeout = 1800

[z_tilt]
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5
speed = 200
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.0075

[board_pins]
aliases = 
	
	EXP1_1=PE8, EXP1_2=PE7,
	EXP1_3=PE9, EXP1_4=PE10,
	EXP1_5=PE12, EXP1_6=PE13,
	EXP1_7=PE14, EXP1_8=PE15,
	EXP1_9=<GND>, EXP1_10=<5V>,
	
	
	EXP2_1=PA6, EXP2_2=PA5,
	EXP2_3=PB1, EXP2_4=PA4,
	EXP2_5=PB2, EXP2_6=PA7,
	EXP2_7=PC15, EXP2_8=<RST>,
	EXP2_9=<GND>, EXP2_10=<5V>

[gcode_macro _User_Variables]
variable_verbose = True
variable_debug = False
variable_travel_speed = 200
variable_move_accel = 1000
variable_dock_speed = 50
variable_release_speed = 75
variable_z_drop_speed = 20
variable_safe_z = 25
variable_enable_z_hop = True
variable_max_bed_y = 300
variable_max_bed_x = 300
variable_z_endstop_x = 172
variable_z_endstop_y = 301
variable_docklocation_x = 40.5
variable_docklocation_y = 303.5
variable_docklocation_z = -128
variable_enable_dock_servo = False
variable_servo_name = 'NAME'
variable_servo_deploy = 10
variable_servo_retract = 11
variable_servo_delay = 250
variable_dockmove_x = 40
variable_dockmove_y = 0
variable_dockmove_z = 0
variable_attachmove_x = 0
variable_attachmove_y = 30
variable_attachmove_z = 0
variable_umbilical = False
variable_umbilical_x = 15
variable_umbilical_y = 15
variable_park_toolhead = False
variable_parkposition_x = 125
variable_parkposition_y = 125
variable_parkposition_z = 30
variable_version = 1
variable_attachmove2_x = 0
variable_attachmove2_y = 0
variable_attachmove2_z = 0
variable_home_backoff_x = 10
variable_home_backoff_y = 10
variable_override_homing = ''
variable_dock_on_zhome = True
gcode = 
	{% set Mx = printer['configfile'].config["stepper_x"]["position_max"]|float %}
	{% set My = printer['configfile'].config["stepper_y"]["position_max"]|float %}
	{% set Ox = printer['configfile'].config["probe"]["x_offset"]|float %}
	{% set Oy = printer['configfile'].config["probe"]["y_offset"]|float %}
	{% set Oz = printer['configfile'].config["probe"]["z_offset"]|float %}
	
	
	{% if z_endstop_x != 0 or z_endstop_y != 0 %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_x VALUE={ z_endstop_x }
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_y VALUE={ z_endstop_y }
	
	
	{% else %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_x VALUE={ (Mx * 0.5) - Ox }
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_y VALUE={ (My * 0.5) - Oy }
	{% endif %}

[gcode_macro PRINT_START]
gcode = 
	M117 Homing...
	G28
	ATTACH_PROBE
	Z_TILT_ADJUST
	DOCK_PROBE
	G28
	
	
	
	
	
	
	
	G0 X150 Y150 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	SAVE_GCODE_STATE NAME=STATE_PRINT_END
	
	M400
	G92 E0
	G1 E-2.0 F3600
	
	TURN_OFF_HEATERS
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	M107
	
	BED_MESH_CLEAR
	RESTORE_GCODE_STATE NAME=STATE_PRINT_END
=======================
Loaded MCU 'mcu' 118 commands (v0.12.0-103-g6ce6fbbc / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_i2c3=PA8,PC9 BUS_PINS_sdio=PC12,PD2,PC8,PC9,PC10,PC11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 CLOCK_FREQ=180000000 MCU=stm32f446xx PWM_MAX=255 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-l', '/home/pi/printer_data/logs/klippy.log', '-I', '/home/pi/printer_data/comms/klippy.serial', '-a', '/home/pi/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-103-g6ce6fbbc-dirty'
Untracked files: klippy/extras/z_calibration.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper.git
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
webhooks client 547836908736: {'program': 'Moonraker', 'version': 'v0.8.0-310-g67c98f6'}
=============== Log rollover at Fri Feb 16 20:40:16 2024 ===============
Stats 37.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3118 bytes_read=8327 bytes_retransmit=9 bytes_invalid=0 send_seq=246 receive_seq=246 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999276  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.51 cputime=2.212 memavail=503576 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 38.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3124 bytes_read=8493 bytes_retransmit=9 bytes_invalid=0 send_seq=247 receive_seq=247 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999272  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.51 cputime=2.222 memavail=500824 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 39.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3130 bytes_read=8673 bytes_retransmit=9 bytes_invalid=0 send_seq=248 receive_seq=248 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999229  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.51 cputime=2.229 memavail=501164 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 40.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3136 bytes_read=8839 bytes_retransmit=9 bytes_invalid=0 send_seq=249 receive_seq=249 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999184  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.39 cputime=2.236 memavail=501416 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 41.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3142 bytes_read=9005 bytes_retransmit=9 bytes_invalid=0 send_seq=250 receive_seq=250 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999152  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.39 cputime=2.245 memavail=501164 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 42.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3148 bytes_read=9160 bytes_retransmit=9 bytes_invalid=0 send_seq=251 receive_seq=251 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999171  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.39 cputime=2.258 memavail=494364 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 43.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3154 bytes_read=9320 bytes_retransmit=9 bytes_invalid=0 send_seq=252 receive_seq=252 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999193  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.39 cputime=2.266 memavail=497952 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 44.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3160 bytes_read=9486 bytes_retransmit=9 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999184  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.39 cputime=2.272 memavail=498212 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 45.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3166 bytes_read=9666 bytes_retransmit=9 bytes_invalid=0 send_seq=254 receive_seq=254 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999175  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.28 cputime=2.279 memavail=498724 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 46.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3172 bytes_read=9847 bytes_retransmit=9 bytes_invalid=0 send_seq=255 receive_seq=255 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999190  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.28 cputime=2.286 memavail=498980 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 47.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3178 bytes_read=9998 bytes_retransmit=9 bytes_invalid=0 send_seq=256 receive_seq=256 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999197  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.28 cputime=2.294 memavail=499232 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 48.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3184 bytes_read=10164 bytes_retransmit=9 bytes_invalid=0 send_seq=257 receive_seq=257 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999258  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.28 cputime=2.309 memavail=492176 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 49.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3190 bytes_read=10345 bytes_retransmit=9 bytes_invalid=0 send_seq=258 receive_seq=258 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999262  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.28 cputime=2.319 memavail=494200 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 50.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3196 bytes_read=10510 bytes_retransmit=9 bytes_invalid=0 send_seq=259 receive_seq=259 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999259  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.18 cputime=2.326 memavail=494208 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 51.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3202 bytes_read=10676 bytes_retransmit=9 bytes_invalid=0 send_seq=260 receive_seq=260 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999256  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=2.333 memavail=494208 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 52.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3208 bytes_read=10857 bytes_retransmit=9 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999250  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=2.339 memavail=494460 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 53.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3214 bytes_read=11008 bytes_retransmit=9 bytes_invalid=0 send_seq=262 receive_seq=262 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999250  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.18 cputime=2.346 memavail=494716 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
probe: TRIGGERED
Stats 61.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3296 bytes_read=12455 bytes_retransmit=9 bytes_invalid=0 send_seq=275 receive_seq=275 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999352  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.22 cputime=2.444 memavail=495532 print_time=67.012 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
probe: TRIGGERED
Stats 62.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3330 bytes_read=12666 bytes_retransmit=9 bytes_invalid=0 send_seq=280 receive_seq=280 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999352  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.22 cputime=2.457 memavail=495040 print_time=68.151 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
probe: TRIGGERED
Stats 63.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3364 bytes_read=12892 bytes_retransmit=9 bytes_invalid=0 send_seq=285 receive_seq=285 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999351  heater_bed: target=0 temp=23.8 pwm=0.000 chamber_temp: temp=23.5 sysload=1.22 cputime=2.471 memavail=495292 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 64.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3370 bytes_read=13073 bytes_retransmit=9 bytes_invalid=0 send_seq=286 receive_seq=286 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999347  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.22 cputime=2.480 memavail=495292 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 65.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3376 bytes_read=13235 bytes_retransmit=9 bytes_invalid=0 send_seq=287 receive_seq=287 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999342  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.20 cputime=2.489 memavail=495544 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 66.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3382 bytes_read=13389 bytes_retransmit=9 bytes_invalid=0 send_seq=288 receive_seq=288 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999356  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.20 cputime=2.505 memavail=495552 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 67.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3388 bytes_read=13568 bytes_retransmit=9 bytes_invalid=0 send_seq=289 receive_seq=289 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999359  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.20 cputime=2.522 memavail=497744 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 68.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3394 bytes_read=13719 bytes_retransmit=9 bytes_invalid=0 send_seq=290 receive_seq=290 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999353  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.20 cputime=2.532 memavail=493820 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Error evaluating 'gcode_macro Attach_Probe:gcode': gcode.CommandError: Must Home X and Y Axis First!
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/extras/gcode_macro.py", line 61, in render
    return str(self.template.render(context))
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "<template>", line 37, in top-level template code
  File "/home/pi/klipper/klippy/extras/gcode_macro.py", line 89, in _action_raise_error
    raise self.printer.command_error(msg)
gcode.CommandError: Must Home X and Y Axis First!
Error evaluating 'gcode_macro Attach_Probe:gcode': gcode.CommandError: Must Home X and Y Axis First!

Stats 69.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3400 bytes_read=13885 bytes_retransmit=9 bytes_invalid=0 send_seq=291 receive_seq=291 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999358  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.20 cputime=2.548 memavail=493676 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 70.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3406 bytes_read=14080 bytes_retransmit=9 bytes_invalid=0 send_seq=292 receive_seq=292 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999361  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.10 cputime=2.558 memavail=493684 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 71.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3412 bytes_read=14231 bytes_retransmit=9 bytes_invalid=0 send_seq=293 receive_seq=293 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999363  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.10 cputime=2.567 memavail=493696 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 72.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3418 bytes_read=14397 bytes_retransmit=9 bytes_invalid=0 send_seq=294 receive_seq=294 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999379  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.10 cputime=2.580 memavail=493196 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 73.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3424 bytes_read=14578 bytes_retransmit=9 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999429  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.10 cputime=2.598 memavail=488156 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 74.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3430 bytes_read=14729 bytes_retransmit=9 bytes_invalid=0 send_seq=296 receive_seq=296 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999438  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.10 cputime=2.609 memavail=494232 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 75.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3436 bytes_read=14909 bytes_retransmit=9 bytes_invalid=0 send_seq=297 receive_seq=297 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999430  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=2.618 memavail=494784 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 76.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3442 bytes_read=15090 bytes_retransmit=9 bytes_invalid=0 send_seq=298 receive_seq=298 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999423  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=2.627 memavail=495128 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 77.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3448 bytes_read=15241 bytes_retransmit=9 bytes_invalid=0 send_seq=299 receive_seq=299 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999416  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.18 cputime=2.636 memavail=494876 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 78.2: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3454 bytes_read=15407 bytes_retransmit=9 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999410  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.18 cputime=2.647 memavail=494876 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 79.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3460 bytes_read=15588 bytes_retransmit=9 bytes_invalid=0 send_seq=301 receive_seq=301 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999415  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=2.665 memavail=495128 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 80.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3466 bytes_read=15753 bytes_retransmit=9 bytes_invalid=0 send_seq=302 receive_seq=302 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999416  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.16 cputime=2.677 memavail=493644 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 81.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3472 bytes_read=15919 bytes_retransmit=9 bytes_invalid=0 send_seq=303 receive_seq=303 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999414  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.16 cputime=2.687 memavail=493912 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 82.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3478 bytes_read=16100 bytes_retransmit=9 bytes_invalid=0 send_seq=304 receive_seq=304 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999410  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.16 cputime=2.696 memavail=494112 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 83.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3484 bytes_read=16251 bytes_retransmit=9 bytes_invalid=0 send_seq=305 receive_seq=305 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999406  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.16 cputime=2.705 memavail=494164 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 84.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3490 bytes_read=16417 bytes_retransmit=9 bytes_invalid=0 send_seq=306 receive_seq=306 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999407  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.16 cputime=2.714 memavail=494164 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 85.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3496 bytes_read=16612 bytes_retransmit=9 bytes_invalid=0 send_seq=307 receive_seq=307 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999418  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.15 cputime=2.730 memavail=493952 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 86.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3502 bytes_read=16763 bytes_retransmit=9 bytes_invalid=0 send_seq=308 receive_seq=308 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999434  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.15 cputime=2.749 memavail=494204 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 87.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3508 bytes_read=16929 bytes_retransmit=9 bytes_invalid=0 send_seq=309 receive_seq=309 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999477  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.15 cputime=2.769 memavail=494204 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 88.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3514 bytes_read=17110 bytes_retransmit=9 bytes_invalid=0 send_seq=310 receive_seq=310 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999484  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.5 sysload=1.15 cputime=2.789 memavail=494204 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 89.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3520 bytes_read=17258 bytes_retransmit=9 bytes_invalid=0 send_seq=311 receive_seq=311 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999487  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.15 cputime=2.809 memavail=494456 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 90.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3526 bytes_read=17427 bytes_retransmit=9 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999492  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.14 cputime=2.827 memavail=494204 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 91.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3532 bytes_read=17606 bytes_retransmit=9 bytes_invalid=0 send_seq=313 receive_seq=313 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999494  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.14 cputime=2.847 memavail=494472 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 92.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3538 bytes_read=17757 bytes_retransmit=9 bytes_invalid=0 send_seq=314 receive_seq=314 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999496  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.14 cputime=2.866 memavail=494220 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 93.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3544 bytes_read=17923 bytes_retransmit=9 bytes_invalid=0 send_seq=315 receive_seq=315 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999496  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.14 cputime=2.886 memavail=494224 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 94.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3550 bytes_read=18104 bytes_retransmit=9 bytes_invalid=0 send_seq=316 receive_seq=316 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999499  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.14 cputime=2.905 memavail=494476 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 95.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3556 bytes_read=18269 bytes_retransmit=9 bytes_invalid=0 send_seq=317 receive_seq=317 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999504  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.12 cputime=2.925 memavail=494980 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 96.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3562 bytes_read=18435 bytes_retransmit=9 bytes_invalid=0 send_seq=318 receive_seq=318 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999507  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.12 cputime=2.945 memavail=494988 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 97.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3568 bytes_read=18616 bytes_retransmit=9 bytes_invalid=0 send_seq=319 receive_seq=319 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999509  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.12 cputime=2.963 memavail=495240 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 98.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3574 bytes_read=18767 bytes_retransmit=9 bytes_invalid=0 send_seq=320 receive_seq=320 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999515  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.12 cputime=2.983 memavail=495240 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 99.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3580 bytes_read=18933 bytes_retransmit=9 bytes_invalid=0 send_seq=321 receive_seq=321 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999518  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.12 cputime=3.002 memavail=494988 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 100.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3586 bytes_read=19128 bytes_retransmit=9 bytes_invalid=0 send_seq=322 receive_seq=322 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999526  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.20 cputime=3.023 memavail=494988 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 101.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3592 bytes_read=19279 bytes_retransmit=9 bytes_invalid=0 send_seq=323 receive_seq=323 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999526  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.20 cputime=3.043 memavail=495248 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 102.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3598 bytes_read=19445 bytes_retransmit=9 bytes_invalid=0 send_seq=324 receive_seq=324 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999528  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.20 cputime=3.062 memavail=495252 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 103.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3604 bytes_read=19626 bytes_retransmit=9 bytes_invalid=0 send_seq=325 receive_seq=325 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999528  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.20 cputime=3.083 memavail=495504 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 104.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3610 bytes_read=19777 bytes_retransmit=9 bytes_invalid=0 send_seq=326 receive_seq=326 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999525  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=1.20 cputime=3.102 memavail=495504 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 105.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3616 bytes_read=19957 bytes_retransmit=9 bytes_invalid=0 send_seq=327 receive_seq=327 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999526  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.18 cputime=3.119 memavail=495820 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 106.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3622 bytes_read=20138 bytes_retransmit=9 bytes_invalid=0 send_seq=328 receive_seq=328 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999521  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=3.128 memavail=495588 print_time=69.079 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
No axis homed
moving to a safe Z distance
X or Y not homed, forcing full G28
Homing X
Homing Y
Homing Z
probe: TRIGGERED
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
SET_KINEMATIC_POSITION pos=0.000,0.000,0.000
Stats 107.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3635 bytes_read=20304 bytes_retransmit=9 bytes_invalid=0 send_seq=330 receive_seq=330 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999516  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.18 cputime=3.161 memavail=496568 print_time=113.286 buffer_time=0.099 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
TMC 'stepper_z' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_z1' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_z2' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_z' reports GSTAT:      00000000
TMC 'stepper_z1' reports GSTAT:      00000000
TMC 'stepper_z2' reports GSTAT:      00000000
Stats 108.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=5357 bytes_read=21719 bytes_retransmit=9 bytes_invalid=0 send_seq=405 receive_seq=405 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999506  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=3.237 memavail=496612 print_time=115.361 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 109.3: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=5463 bytes_read=22028 bytes_retransmit=9 bytes_invalid=0 send_seq=413 receive_seq=413 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999504  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.18 cputime=3.254 memavail=496616 print_time=115.361 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
TMC 'stepper_x' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_y' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_x' reports GSTAT:      00000000
TMC 'stepper_y' reports GSTAT:      00000000
Stats 110.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=6906 bytes_read=23426 bytes_retransmit=9 bytes_invalid=0 send_seq=490 receive_seq=490 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999502  heater_bed: target=0 temp=23.8 pwm=0.000 chamber_temp: temp=23.6 sysload=1.16 cputime=3.328 memavail=496364 print_time=116.361 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 111.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=7598 bytes_read=24154 bytes_retransmit=9 bytes_invalid=0 send_seq=528 receive_seq=528 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999504  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.16 cputime=3.393 memavail=496372 print_time=117.361 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 112.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=8290 bytes_read=24881 bytes_retransmit=9 bytes_invalid=0 send_seq=566 receive_seq=566 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=7 upcoming_bytes=0 freq=179999509  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=1.16 cputime=3.455 memavail=501548 print_time=118.361 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 113.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=8992 bytes_read=25580 bytes_retransmit=9 bytes_invalid=0 send_seq=606 receive_seq=606 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999515  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=1.16 cputime=3.515 memavail=501044 print_time=119.361 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 114.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=9681 bytes_read=26294 bytes_retransmit=9 bytes_invalid=0 send_seq=646 receive_seq=646 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999517  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.16 cputime=3.579 memavail=501044 print_time=120.361 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 115.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=10396 bytes_read=27027 bytes_retransmit=9 bytes_invalid=0 send_seq=684 receive_seq=683 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999519  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=1.07 cputime=3.645 memavail=500568 print_time=121.411 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 116.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=11103 bytes_read=27745 bytes_retransmit=9 bytes_invalid=0 send_seq=725 receive_seq=725 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999521  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.07 cputime=3.707 memavail=500064 print_time=122.411 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 117.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=11790 bytes_read=28463 bytes_retransmit=9 bytes_invalid=0 send_seq=762 receive_seq=761 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999526  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.07 cputime=3.770 memavail=500076 print_time=123.411 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 118.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=12489 bytes_read=29195 bytes_retransmit=9 bytes_invalid=0 send_seq=800 receive_seq=800 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999525  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=1.07 cputime=3.834 memavail=500076 print_time=124.411 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 119.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=13192 bytes_read=29914 bytes_retransmit=9 bytes_invalid=0 send_seq=840 receive_seq=840 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999533  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=1.07 cputime=3.900 memavail=500076 print_time=125.411 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 120.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=14092 bytes_read=30716 bytes_retransmit=9 bytes_invalid=0 send_seq=883 receive_seq=883 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999544  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.99 cputime=3.972 memavail=499824 print_time=126.487 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 121.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=15276 bytes_read=31475 bytes_retransmit=9 bytes_invalid=0 send_seq=929 receive_seq=929 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999548  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.99 cputime=4.043 memavail=499824 print_time=127.424 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 122.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=16053 bytes_read=32150 bytes_retransmit=9 bytes_invalid=0 send_seq=968 receive_seq=968 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999549  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.99 cputime=4.104 memavail=499584 print_time=128.374 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 123.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=16907 bytes_read=32894 bytes_retransmit=9 bytes_invalid=0 send_seq=1008 receive_seq=1008 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999554  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.99 cputime=4.171 memavail=499584 print_time=129.400 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Probe already docked
Stats 124.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000004 bytes_write=18028 bytes_read=33653 bytes_retransmit=9 bytes_invalid=0 send_seq=1054 receive_seq=1054 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999555  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.99 cputime=4.246 memavail=499584 print_time=130.390 buffer_time=0.192 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
probe: TRIGGERED
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 125.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=19598 bytes_read=34179 bytes_retransmit=9 bytes_invalid=0 send_seq=1089 receive_seq=1089 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999561  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.99 cputime=4.332 memavail=499336 print_time=131.873 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 126.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=20267 bytes_read=34735 bytes_retransmit=9 bytes_invalid=0 send_seq=1115 receive_seq=1115 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999563  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.99 cputime=4.385 memavail=499084 print_time=132.373 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 127.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=21134 bytes_read=35463 bytes_retransmit=9 bytes_invalid=0 send_seq=1156 receive_seq=1156 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999577  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.99 cputime=4.455 memavail=499092 print_time=133.373 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 128.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=22018 bytes_read=36200 bytes_retransmit=9 bytes_invalid=0 send_seq=1199 receive_seq=1199 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999583  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.7 sysload=0.99 cputime=4.525 memavail=499092 print_time=134.373 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 129.3: gcodein=0  mcu: mcu_awake=0.005 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=22870 bytes_read=36928 bytes_retransmit=9 bytes_invalid=0 send_seq=1237 receive_seq=1237 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999590  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.99 cputime=4.592 memavail=499092 print_time=135.373 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 130.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000008 mcu_task_stddev=0.000006 bytes_write=23742 bytes_read=37676 bytes_retransmit=9 bytes_invalid=0 send_seq=1279 receive_seq=1279 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999588  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.91 cputime=4.660 memavail=499092 print_time=136.373 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 131.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000008 mcu_task_stddev=0.000006 bytes_write=24606 bytes_read=38393 bytes_retransmit=9 bytes_invalid=0 send_seq=1318 receive_seq=1318 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999581  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.91 cputime=4.727 memavail=499092 print_time=137.373 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 132.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000008 mcu_task_stddev=0.000006 bytes_write=25473 bytes_read=39136 bytes_retransmit=9 bytes_invalid=0 send_seq=1359 receive_seq=1359 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999580  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.91 cputime=4.801 memavail=499092 print_time=138.373 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 133.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000008 mcu_task_stddev=0.000006 bytes_write=26532 bytes_read=39832 bytes_retransmit=9 bytes_invalid=0 send_seq=1398 receive_seq=1398 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999583  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.91 cputime=4.869 memavail=499104 print_time=139.372 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 134.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000008 mcu_task_stddev=0.000006 bytes_write=27857 bytes_read=40753 bytes_retransmit=9 bytes_invalid=0 send_seq=1457 receive_seq=1457 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=14 upcoming_bytes=0 freq=179999580  heater_bed: target=0 temp=23.8 pwm=0.000 chamber_temp: temp=23.6 sysload=0.91 cputime=4.970 memavail=499104 print_time=142.319 buffer_time=2.116 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 135.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=28017 bytes_read=41179 bytes_retransmit=9 bytes_invalid=0 send_seq=1468 receive_seq=1468 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999589  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=0.83 cputime=5.014 memavail=499104 print_time=142.319 buffer_time=1.116 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 136.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=28408 bytes_read=41595 bytes_retransmit=9 bytes_invalid=0 send_seq=1483 receive_seq=1483 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999590  heater_bed: target=0 temp=23.8 pwm=0.000 chamber_temp: temp=23.5 sysload=0.83 cputime=5.062 memavail=499104 print_time=142.319 buffer_time=0.115 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
probe: TRIGGERED
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 137.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=28561 bytes_read=41984 bytes_retransmit=9 bytes_invalid=0 send_seq=1495 receive_seq=1495 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999603  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=0.83 cputime=5.146 memavail=499104 print_time=142.638 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 138.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=28707 bytes_read=42385 bytes_retransmit=9 bytes_invalid=0 send_seq=1506 receive_seq=1506 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999602  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.83 cputime=5.187 memavail=499112 print_time=142.638 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 139.3: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=28853 bytes_read=42781 bytes_retransmit=9 bytes_invalid=0 send_seq=1517 receive_seq=1517 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999604  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.83 cputime=5.230 memavail=499116 print_time=142.638 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 140.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000005 bytes_write=28999 bytes_read=43177 bytes_retransmit=9 bytes_invalid=0 send_seq=1528 receive_seq=1528 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999608  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.77 cputime=5.273 memavail=499116 print_time=142.638 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 141.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000005 bytes_write=29145 bytes_read=43588 bytes_retransmit=9 bytes_invalid=0 send_seq=1539 receive_seq=1539 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999612  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.77 cputime=5.319 memavail=499116 print_time=142.638 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 142.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000005 bytes_write=29291 bytes_read=43984 bytes_retransmit=9 bytes_invalid=0 send_seq=1550 receive_seq=1550 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999615  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.77 cputime=5.363 memavail=499116 print_time=142.638 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 143.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000005 bytes_write=29437 bytes_read=44365 bytes_retransmit=9 bytes_invalid=0 send_seq=1561 receive_seq=1561 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999613  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.5 sysload=0.77 cputime=5.404 memavail=498876 print_time=142.638 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Attaching Probe
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 144.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000005 bytes_write=30897 bytes_read=44886 bytes_retransmit=9 bytes_invalid=0 send_seq=1594 receive_seq=1594 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999609  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.77 cputime=5.494 memavail=498876 print_time=150.449 buffer_time=0.239 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 145.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=31736 bytes_read=45352 bytes_retransmit=9 bytes_invalid=0 send_seq=1616 receive_seq=1616 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999606  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.5 sysload=0.71 cputime=5.556 memavail=499152 print_time=151.966 buffer_time=0.755 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 146.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=32067 bytes_read=45748 bytes_retransmit=9 bytes_invalid=0 send_seq=1630 receive_seq=1630 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=179999603  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=0.71 cputime=5.624 memavail=498900 print_time=152.256 buffer_time=0.045 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
probe: open
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 147.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=32220 bytes_read=46174 bytes_retransmit=9 bytes_invalid=0 send_seq=1642 receive_seq=1642 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999601  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.7 sysload=0.71 cputime=5.695 memavail=504104 print_time=152.256 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 148.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=32366 bytes_read=46570 bytes_retransmit=9 bytes_invalid=0 send_seq=1653 receive_seq=1653 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999597  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.71 cputime=5.740 memavail=503356 print_time=152.256 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 149.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=32512 bytes_read=46951 bytes_retransmit=9 bytes_invalid=0 send_seq=1664 receive_seq=1664 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999596  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.71 cputime=5.787 memavail=502852 print_time=152.256 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 150.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=33272 bytes_read=47427 bytes_retransmit=9 bytes_invalid=0 send_seq=1685 receive_seq=1685 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=7 upcoming_bytes=0 freq=179999592  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.65 cputime=5.853 memavail=502852 print_time=157.615 buffer_time=1.401 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 151.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=33425 bytes_read=47823 bytes_retransmit=9 bytes_invalid=0 send_seq=1696 receive_seq=1696 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999593  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.7 sysload=0.65 cputime=5.900 memavail=502600 print_time=157.615 buffer_time=0.400 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 152.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=34227 bytes_read=48259 bytes_retransmit=9 bytes_invalid=0 send_seq=1718 receive_seq=1718 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999589  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.65 cputime=5.959 memavail=502600 print_time=158.380 buffer_time=0.164 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 153.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=34373 bytes_read=48670 bytes_retransmit=9 bytes_invalid=0 send_seq=1729 receive_seq=1729 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=179999587  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.65 cputime=6.018 memavail=502352 print_time=159.707 buffer_time=0.491 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
probe: TRIGGERED
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 154.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=34526 bytes_read=49081 bytes_retransmit=9 bytes_invalid=0 send_seq=1741 receive_seq=1741 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999591  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.7 sysload=0.65 cputime=6.080 memavail=502108 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 155.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=34672 bytes_read=49492 bytes_retransmit=9 bytes_invalid=0 send_seq=1752 receive_seq=1752 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999594  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.60 cputime=6.124 memavail=501632 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 156.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=34818 bytes_read=49888 bytes_retransmit=9 bytes_invalid=0 send_seq=1763 receive_seq=1763 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999588  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.60 cputime=6.166 memavail=501632 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 157.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=34964 bytes_read=50284 bytes_retransmit=9 bytes_invalid=0 send_seq=1774 receive_seq=1774 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999587  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.60 cputime=6.209 memavail=501632 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 158.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=35110 bytes_read=50680 bytes_retransmit=9 bytes_invalid=0 send_seq=1785 receive_seq=1785 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999593  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.60 cputime=6.255 memavail=501632 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 159.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=35256 bytes_read=51076 bytes_retransmit=9 bytes_invalid=0 send_seq=1796 receive_seq=1796 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999590  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.60 cputime=6.299 memavail=501632 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 160.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=35402 bytes_read=51487 bytes_retransmit=9 bytes_invalid=0 send_seq=1807 receive_seq=1807 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999588  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.55 cputime=6.338 memavail=501644 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 161.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=35548 bytes_read=51874 bytes_retransmit=9 bytes_invalid=0 send_seq=1818 receive_seq=1818 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999588  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.55 cputime=6.380 memavail=501644 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 162.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=35694 bytes_read=52263 bytes_retransmit=9 bytes_invalid=0 send_seq=1829 receive_seq=1829 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999587  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.55 cputime=6.425 memavail=501392 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 163.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=35840 bytes_read=52659 bytes_retransmit=9 bytes_invalid=0 send_seq=1840 receive_seq=1840 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999585  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.55 cputime=6.466 memavail=501392 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 164.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=35986 bytes_read=53055 bytes_retransmit=9 bytes_invalid=0 send_seq=1851 receive_seq=1851 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999586  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.55 cputime=6.508 memavail=501392 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 165.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=36132 bytes_read=53466 bytes_retransmit=9 bytes_invalid=0 send_seq=1862 receive_seq=1862 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999588  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=0.50 cputime=6.546 memavail=501404 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 166.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=36278 bytes_read=53862 bytes_retransmit=9 bytes_invalid=0 send_seq=1873 receive_seq=1873 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999591  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.7 sysload=0.50 cputime=6.586 memavail=501404 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 167.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=36424 bytes_read=54258 bytes_retransmit=9 bytes_invalid=0 send_seq=1884 receive_seq=1884 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999589  heater_bed: target=0 temp=24.2 pwm=0.000 chamber_temp: temp=23.6 sysload=0.50 cputime=6.630 memavail=500900 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 168.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=36570 bytes_read=54654 bytes_retransmit=9 bytes_invalid=0 send_seq=1895 receive_seq=1895 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999609  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.50 cputime=6.672 memavail=500648 print_time=159.707 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Attaching Probe
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 169.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=37754 bytes_read=55135 bytes_retransmit=9 bytes_invalid=0 send_seq=1923 receive_seq=1923 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=56 upcoming_bytes=0 freq=179999631  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.50 cputime=6.738 memavail=500148 print_time=175.800 buffer_time=0.572 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 170.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=38821 bytes_read=55621 bytes_retransmit=9 bytes_invalid=0 send_seq=1949 receive_seq=1949 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=28 upcoming_bytes=0 freq=179999632  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.46 cputime=6.798 memavail=499896 print_time=177.281 buffer_time=1.052 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 171.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=39180 bytes_read=56032 bytes_retransmit=9 bytes_invalid=0 send_seq=1963 receive_seq=1963 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999631  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.46 cputime=6.849 memavail=499904 print_time=177.281 buffer_time=0.052 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
probe: TRIGGERED
Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/extras/gcode_macro.py", line 61, in render
    return str(self.template.render(context))
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "<template>", line 26, in top-level template code
  File "/home/pi/klipper/klippy/extras/gcode_macro.py", line 89, in _action_raise_error
    raise self.printer.command_error(msg)
gcode.CommandError: Probe attach failed!
Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!

Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!

Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!

Stats 172.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=39333 bytes_read=56443 bytes_retransmit=9 bytes_invalid=0 send_seq=1975 receive_seq=1975 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999644  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.46 cputime=6.911 memavail=499904 print_time=177.571 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 173.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=39479 bytes_read=56839 bytes_retransmit=9 bytes_invalid=0 send_seq=1986 receive_seq=1986 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999637  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.46 cputime=6.929 memavail=499408 print_time=177.571 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Attaching Probe
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 174.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=40295 bytes_read=57290 bytes_retransmit=9 bytes_invalid=0 send_seq=2008 receive_seq=2008 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=28 upcoming_bytes=0 freq=179999629  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.46 cputime=6.960 memavail=499408 print_time=181.291 buffer_time=1.061 print_stall=0 extruder: target=0 temp=24.0 pwm=0.000
Stats 175.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=40654 bytes_read=57716 bytes_retransmit=9 bytes_invalid=0 send_seq=2022 receive_seq=2022 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999626  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.43 cputime=6.980 memavail=499408 print_time=181.291 buffer_time=0.060 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
probe: TRIGGERED
Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!
Traceback (most recent call last):
  File "/home/pi/klipper/klippy/extras/gcode_macro.py", line 61, in render
    return str(self.template.render(context))
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/environment.py", line 1090, in render
    self.environment.handle_exception()
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/environment.py", line 832, in handle_exception
    reraise(*rewrite_traceback_stack(source=source))
  File "/home/pi/klippy-env/lib/python3.9/site-packages/jinja2/_compat.py", line 28, in reraise
    raise value.with_traceback(tb)
  File "<template>", line 26, in top-level template code
  File "/home/pi/klipper/klippy/extras/gcode_macro.py", line 89, in _action_raise_error
    raise self.printer.command_error(msg)
gcode.CommandError: Probe attach failed!
Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!

Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!

Error evaluating 'gcode_macro _SetProbeState:gcode': gcode.CommandError: Probe attach failed!

Stats 176.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=40807 bytes_read=58127 bytes_retransmit=9 bytes_invalid=0 send_seq=2034 receive_seq=2034 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999620  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.43 cputime=7.013 memavail=499408 print_time=181.647 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Attaching Probe
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 177.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=41623 bytes_read=58578 bytes_retransmit=9 bytes_invalid=0 send_seq=2056 receive_seq=2056 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=28 upcoming_bytes=0 freq=179999612  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.43 cputime=7.069 memavail=499164 print_time=184.184 buffer_time=0.952 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 178.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=41982 bytes_read=58989 bytes_retransmit=9 bytes_invalid=0 send_seq=2070 receive_seq=2070 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=179999622  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.43 cputime=7.133 memavail=499168 print_time=184.474 buffer_time=0.241 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
probe: open
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 179.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=42135 bytes_read=59400 bytes_retransmit=9 bytes_invalid=0 send_seq=2082 receive_seq=2082 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999624  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.43 cputime=7.201 memavail=499168 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 180.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=42281 bytes_read=59811 bytes_retransmit=9 bytes_invalid=0 send_seq=2093 receive_seq=2093 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999624  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.6 sysload=0.39 cputime=7.241 memavail=499168 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 181.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=42433 bytes_read=60223 bytes_retransmit=9 bytes_invalid=0 send_seq=2105 receive_seq=2105 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999632  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.39 cputime=7.284 memavail=499168 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 182.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=42579 bytes_read=60619 bytes_retransmit=9 bytes_invalid=0 send_seq=2116 receive_seq=2116 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999639  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.39 cputime=7.328 memavail=499176 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 183.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=42725 bytes_read=61015 bytes_retransmit=9 bytes_invalid=0 send_seq=2127 receive_seq=2127 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999635  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.39 cputime=7.368 memavail=499176 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 184.3: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000005 bytes_write=42871 bytes_read=61411 bytes_retransmit=9 bytes_invalid=0 send_seq=2138 receive_seq=2138 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999638  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.39 cputime=7.410 memavail=499180 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 185.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=43017 bytes_read=61811 bytes_retransmit=9 bytes_invalid=0 send_seq=2149 receive_seq=2149 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999644  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.36 cputime=7.451 memavail=499180 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 186.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=43163 bytes_read=62202 bytes_retransmit=9 bytes_invalid=0 send_seq=2160 receive_seq=2160 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999637  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.36 cputime=7.490 memavail=498928 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 187.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=43309 bytes_read=62598 bytes_retransmit=9 bytes_invalid=0 send_seq=2171 receive_seq=2171 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999636  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.36 cputime=7.529 memavail=498928 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 188.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=43455 bytes_read=62994 bytes_retransmit=9 bytes_invalid=0 send_seq=2182 receive_seq=2182 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999637  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.36 cputime=7.569 memavail=498684 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 189.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=43601 bytes_read=63390 bytes_retransmit=9 bytes_invalid=0 send_seq=2193 receive_seq=2193 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999637  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.36 cputime=7.610 memavail=498684 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 190.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=43747 bytes_read=63801 bytes_retransmit=9 bytes_invalid=0 send_seq=2204 receive_seq=2204 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999633  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=7.647 memavail=498684 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 191.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=43893 bytes_read=64197 bytes_retransmit=9 bytes_invalid=0 send_seq=2215 receive_seq=2215 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999630  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=7.686 memavail=498684 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 192.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=44039 bytes_read=64593 bytes_retransmit=9 bytes_invalid=0 send_seq=2226 receive_seq=2226 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999629  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=7.727 memavail=498684 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 193.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=44185 bytes_read=64989 bytes_retransmit=9 bytes_invalid=0 send_seq=2237 receive_seq=2237 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999624  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=7.771 memavail=498688 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 194.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=44331 bytes_read=65385 bytes_retransmit=9 bytes_invalid=0 send_seq=2248 receive_seq=2248 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999625  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=7.814 memavail=498696 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 195.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=44477 bytes_read=65796 bytes_retransmit=9 bytes_invalid=0 send_seq=2259 receive_seq=2259 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999623  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=7.853 memavail=498444 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 196.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=44623 bytes_read=66192 bytes_retransmit=9 bytes_invalid=0 send_seq=2270 receive_seq=2270 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999622  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=0.30 cputime=7.892 memavail=498192 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 197.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=44769 bytes_read=66588 bytes_retransmit=9 bytes_invalid=0 send_seq=2281 receive_seq=2281 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999622  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=7.933 memavail=498192 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 198.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=44915 bytes_read=66999 bytes_retransmit=9 bytes_invalid=0 send_seq=2292 receive_seq=2292 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999619  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=7.972 memavail=498192 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 199.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=45061 bytes_read=67380 bytes_retransmit=9 bytes_invalid=0 send_seq=2303 receive_seq=2303 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999619  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=8.013 memavail=498200 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.0 pwm=0.000
Stats 200.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=45207 bytes_read=67791 bytes_retransmit=9 bytes_invalid=0 send_seq=2314 receive_seq=2314 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999624  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.36 cputime=8.052 memavail=498200 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 201.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=45353 bytes_read=68202 bytes_retransmit=9 bytes_invalid=0 send_seq=2325 receive_seq=2325 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999620  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.36 cputime=8.094 memavail=498204 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 202.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=45499 bytes_read=68583 bytes_retransmit=9 bytes_invalid=0 send_seq=2336 receive_seq=2336 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999617  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.36 cputime=8.135 memavail=498204 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 203.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=45645 bytes_read=68979 bytes_retransmit=9 bytes_invalid=0 send_seq=2347 receive_seq=2347 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999615  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.36 cputime=8.177 memavail=498204 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 204.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=45791 bytes_read=69390 bytes_retransmit=9 bytes_invalid=0 send_seq=2358 receive_seq=2358 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999612  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.36 cputime=8.216 memavail=498204 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 205.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=45937 bytes_read=69786 bytes_retransmit=9 bytes_invalid=0 send_seq=2369 receive_seq=2369 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999608  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=8.256 memavail=497964 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 206.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=46083 bytes_read=70182 bytes_retransmit=9 bytes_invalid=0 send_seq=2380 receive_seq=2380 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999608  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.33 cputime=8.298 memavail=497964 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.0 pwm=0.000
Stats 207.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=46229 bytes_read=70593 bytes_retransmit=9 bytes_invalid=0 send_seq=2391 receive_seq=2391 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999604  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=8.337 memavail=497712 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 208.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=46375 bytes_read=70972 bytes_retransmit=9 bytes_invalid=0 send_seq=2402 receive_seq=2402 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999606  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.7 sysload=0.33 cputime=8.376 memavail=497712 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 209.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=46521 bytes_read=71357 bytes_retransmit=9 bytes_invalid=0 send_seq=2413 receive_seq=2413 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999600  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.33 cputime=8.412 memavail=497716 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.0 pwm=0.000
Stats 210.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=46667 bytes_read=71779 bytes_retransmit=9 bytes_invalid=0 send_seq=2424 receive_seq=2424 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999594  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=8.453 memavail=497724 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 211.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=46813 bytes_read=72160 bytes_retransmit=9 bytes_invalid=0 send_seq=2435 receive_seq=2435 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999588  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=8.495 memavail=497976 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 212.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=46959 bytes_read=72556 bytes_retransmit=9 bytes_invalid=0 send_seq=2446 receive_seq=2446 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999582  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.5 sysload=0.30 cputime=8.535 memavail=497724 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 213.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=47105 bytes_read=72967 bytes_retransmit=9 bytes_invalid=0 send_seq=2457 receive_seq=2457 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999577  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=8.572 memavail=497724 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 214.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=47251 bytes_read=73348 bytes_retransmit=9 bytes_invalid=0 send_seq=2468 receive_seq=2468 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999572  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.30 cputime=8.611 memavail=497724 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 215.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=47397 bytes_read=73759 bytes_retransmit=9 bytes_invalid=0 send_seq=2479 receive_seq=2479 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999566  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.5 sysload=0.28 cputime=8.653 memavail=497472 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 216.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=47543 bytes_read=74170 bytes_retransmit=9 bytes_invalid=0 send_seq=2490 receive_seq=2490 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999560  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.28 cputime=8.693 memavail=497228 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 217.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=47689 bytes_read=74551 bytes_retransmit=9 bytes_invalid=0 send_seq=2501 receive_seq=2501 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999555  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.28 cputime=8.730 memavail=497228 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 218.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=47835 bytes_read=74947 bytes_retransmit=9 bytes_invalid=0 send_seq=2512 receive_seq=2512 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999557  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.28 cputime=8.767 memavail=497228 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 219.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=47981 bytes_read=75358 bytes_retransmit=9 bytes_invalid=0 send_seq=2523 receive_seq=2523 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999561  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.28 cputime=8.811 memavail=496980 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.0 pwm=0.000
Stats 220.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=48127 bytes_read=75754 bytes_retransmit=9 bytes_invalid=0 send_seq=2534 receive_seq=2534 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999562  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.34 cputime=8.851 memavail=496980 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 221.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=48273 bytes_read=76150 bytes_retransmit=9 bytes_invalid=0 send_seq=2545 receive_seq=2545 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999567  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.34 cputime=8.892 memavail=496988 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 222.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=48419 bytes_read=76561 bytes_retransmit=9 bytes_invalid=0 send_seq=2556 receive_seq=2556 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999564  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.34 cputime=8.931 memavail=496988 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 223.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=48565 bytes_read=76942 bytes_retransmit=9 bytes_invalid=0 send_seq=2567 receive_seq=2567 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999560  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.34 cputime=8.969 memavail=496988 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 224.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=48711 bytes_read=77338 bytes_retransmit=9 bytes_invalid=0 send_seq=2578 receive_seq=2578 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999567  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.6 sysload=0.34 cputime=9.010 memavail=496988 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 225.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=48857 bytes_read=77764 bytes_retransmit=9 bytes_invalid=0 send_seq=2589 receive_seq=2589 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999570  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.31 cputime=9.050 memavail=496988 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 226.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=49003 bytes_read=78145 bytes_retransmit=9 bytes_invalid=0 send_seq=2600 receive_seq=2600 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999577  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.31 cputime=9.088 memavail=496740 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 227.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=49149 bytes_read=78541 bytes_retransmit=9 bytes_invalid=0 send_seq=2611 receive_seq=2611 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999579  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.31 cputime=9.126 memavail=496748 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 228.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=49295 bytes_read=78952 bytes_retransmit=9 bytes_invalid=0 send_seq=2622 receive_seq=2622 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999585  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.31 cputime=9.168 memavail=496748 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 229.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=49441 bytes_read=79333 bytes_retransmit=9 bytes_invalid=0 send_seq=2633 receive_seq=2633 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999599  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.31 cputime=9.209 memavail=496748 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 230.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=49587 bytes_read=79744 bytes_retransmit=9 bytes_invalid=0 send_seq=2644 receive_seq=2644 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999600  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.29 cputime=9.251 memavail=496496 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 231.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=49733 bytes_read=80155 bytes_retransmit=9 bytes_invalid=0 send_seq=2655 receive_seq=2655 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999593  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.29 cputime=9.293 memavail=496496 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 232.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=49879 bytes_read=80533 bytes_retransmit=9 bytes_invalid=0 send_seq=2666 receive_seq=2666 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999589  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.29 cputime=9.336 memavail=496244 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 233.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=50025 bytes_read=80917 bytes_retransmit=9 bytes_invalid=0 send_seq=2677 receive_seq=2677 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999590  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.29 cputime=9.382 memavail=496252 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 234.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=50171 bytes_read=81325 bytes_retransmit=9 bytes_invalid=0 send_seq=2688 receive_seq=2688 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999593  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.29 cputime=9.425 memavail=496256 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 235.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=50317 bytes_read=81721 bytes_retransmit=9 bytes_invalid=0 send_seq=2699 receive_seq=2699 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999595  heater_bed: target=0 temp=24.1 pwm=0.000 chamber_temp: temp=23.6 sysload=0.26 cputime=9.464 memavail=496456 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 236.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=50463 bytes_read=82117 bytes_retransmit=9 bytes_invalid=0 send_seq=2710 receive_seq=2710 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999593  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.26 cputime=9.506 memavail=496508 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 237.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=50609 bytes_read=82528 bytes_retransmit=9 bytes_invalid=0 send_seq=2721 receive_seq=2721 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999598  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.26 cputime=9.551 memavail=496508 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 238.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=50755 bytes_read=82909 bytes_retransmit=9 bytes_invalid=0 send_seq=2732 receive_seq=2732 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999602  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.26 cputime=9.596 memavail=496508 print_time=184.474 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 242.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=51966 bytes_read=84574 bytes_retransmit=9 bytes_invalid=0 send_seq=2787 receive_seq=2787 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999596  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.24 cputime=9.791 memavail=496516 print_time=248.980 buffer_time=0.705 print_stall=0 extruder: target=0 temp=23.8 pwm=0.000
Stats 243.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=52573 bytes_read=85025 bytes_retransmit=9 bytes_invalid=0 send_seq=2806 receive_seq=2806 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999592  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.24 cputime=9.849 memavail=496516 print_time=249.745 buffer_time=0.470 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
toolhead: max_velocity: 300.000000
max_accel: 1000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 244.4: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000006 mcu_task_stddev=0.000004 bytes_write=52919 bytes_read=85426 bytes_retransmit=9 bytes_invalid=0 send_seq=2821 receive_seq=2821 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=2 freq=179999597  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.24 cputime=9.911 memavail=496768 print_time=251.075 buffer_time=0.798 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
probe: TRIGGERED
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
toolhead: max_velocity: 300.000000
max_accel: 3000.000000
max_accel_to_decel: 1500.000000
square_corner_velocity: 5.000000
Stats 245.4: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=53072 bytes_read=85852 bytes_retransmit=9 bytes_invalid=0 send_seq=2833 receive_seq=2833 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999594  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.22 cputime=9.972 memavail=496772 print_time=251.075 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.0 pwm=0.000
Stats 246.4: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=53218 bytes_read=86263 bytes_retransmit=9 bytes_invalid=0 send_seq=2844 receive_seq=2844 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999601  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.22 cputime=10.020 memavail=496772 print_time=251.075 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 247.4: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=53364 bytes_read=86644 bytes_retransmit=9 bytes_invalid=0 send_seq=2855 receive_seq=2855 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999603  heater_bed: target=0 temp=23.9 pwm=0.000 chamber_temp: temp=23.6 sysload=0.22 cputime=10.065 memavail=496772 print_time=251.075 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Stats 248.4: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=53510 bytes_read=87040 bytes_retransmit=9 bytes_invalid=0 send_seq=2866 receive_seq=2866 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999604  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.7 sysload=0.22 cputime=10.109 memavail=552592 print_time=251.075 buffer_time=0.000 print_stall=0 extruder: target=0 temp=24.0 pwm=0.000
webhooks client 547836908736: Disconnected
Stats 249.4: gcodein=0  mcu: mcu_awake=0.003 mcu_task_avg=0.000007 mcu_task_stddev=0.000006 bytes_write=53656 bytes_read=87451 bytes_retransmit=9 bytes_invalid=0 send_seq=2877 receive_seq=2877 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999600  heater_bed: target=0 temp=24.0 pwm=0.000 chamber_temp: temp=23.6 sysload=0.22 cputime=10.129 memavail=573776 print_time=251.075 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.9 pwm=0.000
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-l', '/home/pi/printer_data/logs/klippy.log', '-I', '/home/pi/printer_data/comms/klippy.serial', '-a', '/home/pi/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-103-g6ce6fbbc-dirty'
Untracked files: klippy/extras/z_calibration.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper.git
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Fri Feb 16 20:44:06 2024 (1708141446.6 21.0)
===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _Probe_Variables]
variable_probe_attached = False
variable_probe_state = False
variable_probe_lock = False
variable_probe_z_homed = False
variable_z_endstop_x = 0
variable_z_endstop_y = 0
gcode = 

[gcode_macro _klicky_check_variables_version]
gcode = 
	{% set version = printer["gcode_macro _User_Variables"].version|default(0) %}
	
	{% if version != 1 %}
	{ action_raise_error("Please update your klicky variables, there are some functionality changes") }
	{% endif %}

[gcode_macro _KlickyDebug]
gcode = 
	{% set message  = params.MSG %}
	{% set debug = printer["gcode_macro _User_Variables"].debug|default(False) %}
	
	{% if debug %}
	{ action_respond_info(message) }
	{% endif %}

[gcode_macro _exit_point]
gcode = 
	{% set function  = 'pre_' ~ params.FUNCTION %}
	{% set move  = params.MOVE|default(0) %}
	{% set speed = printer["gcode_macro _User_Variables"].travel_speed %}
	
	
	M400
	SET_VELOCITY_LIMIT ACCEL={printer.configfile.settings.printer.max_accel}
	SET_VELOCITY_LIMIT ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	RESTORE_GCODE_STATE NAME={function} MOVE={move} MOVE_SPEED={speed}

[gcode_macro _entry_point]
gcode = 
	{% set function  = 'pre_' ~ params.FUNCTION %}
	{% set move_accel = printer["gcode_macro _User_Variables"].move_accel|default(1000) %}
	
	M400
	SAVE_GCODE_STATE NAME={function}
	
	SET_GCODE_OFFSET Z=0
	
	G90
	
	SET_VELOCITY_LIMIT ACCEL={move_accel}

[gcode_macro _Homing_Variables]
gcode = 
	{% set reset  = params.RESET|default(0) %}
	{% if reset %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_lock VALUE={ False }
	{% endif %}

[gcode_macro Attach_Probe_Lock]
description = Attaches Klicky Probe, can only be docked after unlocking
gcode = 
	Attach_Probe
	_Probe_Lock

[gcode_macro Dock_Probe_Unlock]
description = Docks Klicky Probe even if it was locked
gcode = 
	_Probe_Unlock
	Dock_Probe

[gcode_macro _Probe_Unlock]
description = Unlocks Klicky Probe state
gcode = 
	_KlickyDebug msg="_Probe_Lock setting probe_lock variable to False"
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_lock VALUE={ False }

[gcode_macro _Probe_Lock]
description = Locks Klicky Probe state
gcode = 
	_KlickyDebug msg="_Probe_Lock setting probe_lock variable to True"
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_lock VALUE={ True }

[gcode_macro _DeployKlickyDock]
description = Deploys Klicky servo-controlled dock
gcode = 
	{% set enable_dock_servo = printer["gcode_macro _User_Variables"].enable_dock_servo|default(False) %}
	{% set servo_delay = printer["gcode_macro _User_Variables"].servo_delay|default(1000) %}
	{% set servo_name = printer["gcode_macro _User_Variables"].servo_name %}
	{% set servo_deploy = printer["gcode_macro _User_Variables"].servo_deploy|default(360) %}
	
	
	M400
	{% if enable_dock_servo != False %}
	_KlickyDebug msg="_DeployKlickyDock Klicky servo configuration enabled"
	{% if servo_deploy == 360 %}
	{ action_raise_error("Klicky: servo active on klicky-variables, but no servo deploy angle specified") }
	{% endif %}
	_KlickyDebug msg="_DeployKlickyDock SET_SERVO SERVO={servo_name|string} ANGLE={servo_deploy|int}"
	SET_SERVO SERVO={servo_name|string} ANGLE={servo_deploy|int}
	M400
	G4 P{servo_delay|int}
	_KlickyDebug msg="_DeployKlickyDock SET_SERVO SERVO={servo_name|string} WIDTH=0"
	SET_SERVO SERVO={servo_name|string} WIDTH=0
	{% elif printer["gcode_macro _DeployDock"] is defined %}
	_KlickyDebug msg="_DeployKlickyDock calling _DeployDock"
	_DeployDock
	{% endif %}

[gcode_macro _RetractKlickyDock]
description = Retracts Klicky servo-controlled dock
gcode = 
	{% set enable_dock_servo = printer["gcode_macro _User_Variables"].enable_dock_servo|default(False) %}
	{% set servo_delay = printer["gcode_macro _User_Variables"].servo_delay|default(1000) %}
	{% set servo_name = printer["gcode_macro _User_Variables"].servo_name %}
	{% set servo_retract = printer["gcode_macro _User_Variables"].servo_retract|default(360) %}
	
	
	M400
	{% if enable_dock_servo != False %}
	_KlickyDebug msg="_RetractKlickyDock Klicky servo configuration enabled"
	{% if servo_retract == 360 %}
	{ action_raise_error("Klicky: servo active on klicky-variables, but no servo retract angle specified") }
	{% endif %}
	_KlickyDebug msg="_RetractKlickyDock SET_SERVO SERVO={servo_name|string} ANGLE={servo_retract|int}"
	SET_SERVO SERVO={servo_name|string} ANGLE={servo_retract|int}
	M400
	G4 P{servo_delay|int}
	_KlickyDebug msg="_RetractKlickyDock SET_SERVO SERVO={servo_name|string} WIDTH=0"
	SET_SERVO SERVO={servo_name|string} WIDTH=0
	{% elif printer["gcode_macro _RetractDock"] is defined %}
	_KlickyDebug msg="_RetractKlickyDock calling _RetractDock"
	_RetractDock
	{% endif %}

[gcode_macro Attach_Probe]
description = Attaches Klicky Probe
gcode = 
	
	{% set goback  = params.BACK|default(0) %}
	
	{% set probe_attached = printer["gcode_macro _Probe_Variables"].probe_attached %}
	{% set probe_lock = printer["gcode_macro _Probe_Variables"].probe_lock %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	{% set dockmove_x = printer["gcode_macro _User_Variables"].dockmove_x|default(0) %}
	{% set dockmove_y = printer["gcode_macro _User_Variables"].dockmove_y|default(0) %}
	{% set dockmove_z = printer["gcode_macro _User_Variables"].dockmove_z|default(0) %}
	{% set docklocation_x = printer["gcode_macro _User_Variables"].docklocation_x %}
	{% set docklocation_y = printer["gcode_macro _User_Variables"].docklocation_y %}
	{% set docklocation_z = printer["gcode_macro _User_Variables"].docklocation_z %}
	{% set attachmove_x = printer["gcode_macro _User_Variables"].attachmove_x|default(0) %}
	{% set attachmove_y = printer["gcode_macro _User_Variables"].attachmove_y|default(0) %}
	{% set attachmove_z = printer["gcode_macro _User_Variables"].attachmove_z|default(0) %}
	{% set attachmove2_x = printer["gcode_macro _User_Variables"].attachmove2_x|default(0) %}
	{% set attachmove2_y = printer["gcode_macro _User_Variables"].attachmove2_y|default(0) %}
	{% set attachmove2_z = printer["gcode_macro _User_Variables"].attachmove2_z|default(0) %}
	
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z %}
	{% set enable_z_hop = printer["gcode_macro _User_Variables"].enable_z_hop %}
	
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set dock_feedrate = printer["gcode_macro _User_Variables"].dock_speed * 60 %}
	{% set release_feedrate = printer["gcode_macro _User_Variables"].release_speed * 60 %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set bypass_probe_docking = printer["gcode_macro _User_Variables"].bypass_probe_docking|default(False) %}
	
	_entry_point function=Attach_Probe
	
	{% if bypass_probe_docking == False %}
	
	
	{% if not 'xy' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X and Y Axis First!") }
	_KlickyDebug msg="Attach_Probe Axis homed"
	
	
	{% elif not probe_attached and not probe_lock %}
	_KlickyDebug msg="Attach_Probe going to attach probe"
	{% if verbose %}
	{ action_respond_info("Attaching Probe") }
	{% endif %}
	_KLICKY_STATUS_BUSY
	
	{% if not 'z' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Resetting Z position to zero") }
	{% endif %}
	_KlickyDebug msg="Attach_Probe Z not homed, setting position as X=Y=Z=0"
	SET_KINEMATIC_POSITION Z=0
	{% if not enable_z_hop %}
	_KlickyDebug msg="Attach_Probe z_hop disabled"
	{% set safe_z = 0 %}
	{% endif %}
	{% endif %}
	
	
	
	{% if printer.gcode_move.gcode_position.z < safe_z %}
	_KlickyDebug msg="Attach_Probe toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	{% if not 'z' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Resetting Z position to zero, duplicate?") }
	{% endif %}
	_KlickyDebug msg="Attach_Probe Z not homed, setting position as X=Y=Z=0"
	SET_KINEMATIC_POSITION Z=0
	{% endif %}
	
	{% if printer.gcode_move.gcode_position.z < safe_z %}
	_KlickyDebug msg="Attach_Probe toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_Umbilical_Path
	
	_entry_point function=Attach_Probe_intern
	
	
	_KlickyDebug msg="Attach_Probe moving near the dock with G0 X{docklocation_x|int - attachmove_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove_y|int - attachmove2_y} F{travel_feedrate}"
	G0 X{docklocation_x|int - attachmove_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove_y|int - attachmove2_y} F{travel_feedrate}
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving near the dock with G0 Z{docklocation_z|int - attachmove_z|int - attachmove2_z|int} F{dock_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int - attachmove2_z|int} F{dock_feedrate}
	_KlickyDebug msg="Attach_Probe moving near the dock with G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}
	{% endif %}
	
	_DeployKlickyDock
	
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 Z{docklocation_z} F{dock_feedrate}"
	G0 Z{docklocation_z} F{dock_feedrate}
	{% endif %}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 X{docklocation_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove2_y} F{dock_feedrate}"
	G0 X{docklocation_x|int - attachmove2_x|int} Y{docklocation_y|int - attachmove2_y} F{dock_feedrate}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}"
	G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving from the dock to G0 Z{docklocation_z|int - attachmove_z|int} F{z_drop_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int} F{z_drop_feedrate}
	{% endif %}
	_KlickyDebug msg="Attach_Probe moving from the dock to G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{release_feedrate}"
	G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{release_feedrate}
	
	_RetractKlickyDock
	
	{% if ((printer.gcode_move.gcode_position.z < safe_z) or (docklocation_z != -128 and docklocation_z < safe_z ))%}
	_KlickyDebug msg="Attach_Probe moving to a safe Z position: G0 Z{safe_z} F{z_drop_feedrate} from {printer.gcode_move.gcode_position.z}"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_Park_Toolhead
	
	_CheckProbe action=attach
	
	_exit_point function=Attach_Probe_intern move={goback}
	_KLICKY_STATUS_READY
	
	{% elif probe_lock %}
	{% if verbose %}
	{ action_respond_info("Probe locked!") }
	{% endif %}
	
	
	_KlickyDebug msg="Attach_Probe probe locked not attaching probe"
	_CheckProbe action=query
	
	{% else %}
	{% if verbose %}
	{ action_respond_info("Probe already attached!") }
	{% endif %}
	
	
	_KlickyDebug msg="Attach_Probe probe already attached, doing nothing"
	_CheckProbe action=query
	
	{% endif %}
	
	_exit_point function=Attach_Probe
	{% else %}
	_KlickyDebug msg="Attach_Probe probe docking bypassed, doing nothing"
	{% endif %}

[gcode_macro Dock_Probe]
description = Docks Klicky Probe
gcode = 
	
	{% set goback  = params.BACK|default(0) %}
	
	{% set probe_attached = printer["gcode_macro _Probe_Variables"].probe_attached %}
	{% set probe_lock = printer["gcode_macro _Probe_Variables"].probe_lock %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	{% set dockmove_x = printer["gcode_macro _User_Variables"].dockmove_x|default(0) %}
	{% set dockmove_y = printer["gcode_macro _User_Variables"].dockmove_y|default(0) %}
	{% set dockmove_z = printer["gcode_macro _User_Variables"].dockmove_z|default(0) %}
	{% set docklocation_x = printer["gcode_macro _User_Variables"].docklocation_x %}
	{% set docklocation_y = printer["gcode_macro _User_Variables"].docklocation_y %}
	{% set docklocation_z = printer["gcode_macro _User_Variables"].docklocation_z %}
	{% set attachmove_x = printer["gcode_macro _User_Variables"].attachmove_x|default(0) %}
	{% set attachmove_y = printer["gcode_macro _User_Variables"].attachmove_y|default(0) %}
	{% set attachmove_z = printer["gcode_macro _User_Variables"].attachmove_z|default(0) %}
	
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set dock_feedrate = printer["gcode_macro _User_Variables"].dock_speed * 60 %}
	{% set release_feedrate = printer["gcode_macro _User_Variables"].release_speed * 60 %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set bypass_probe_docking = printer["gcode_macro _User_Variables"].bypass_probe_docking|default(False) %}
	{% if bypass_probe_docking == True %}
	_KlickyDebug msg="Attach_Probe probe docking bypassed, doing nothing"
	{% endif %}
	
	{% if bypass_probe_docking != True %}
	_entry_point function=Dock_Probe
	
	
	{% if probe_attached and not probe_lock %}
	_KLICKY_STATUS_BUSY
	{% if printer.gcode_move.gcode_position.z < safe_z %}
	_KlickyDebug msg="Dock_Probe toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	_Umbilical_Path
	
	
	_KlickyDebug msg="Dock_Probe moving near the dock with G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{travel_feedrate}"
	G0 X{docklocation_x|int - attachmove_x|int} Y{docklocation_y|int - attachmove_y|int} F{travel_feedrate}
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Dock_Probe moving near the dock with G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}"
	G0 Z{docklocation_z|int - attachmove_z|int} F{dock_feedrate}
	{% endif %}
	
	
	_DeployKlickyDock
	
	
	_KlickyDebug msg="Dock_Probe moving to the dock with G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}"
	
	G0 X{docklocation_x} Y{docklocation_y} F{dock_feedrate}
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Attach_Probe moving to the dock with G0 Z{docklocation_z} F{dock_feedrate}"
	G0 Z{docklocation_z} F{dock_feedrate}
	{% endif %}
	
	
	{% if docklocation_z != -128 %}
	_KlickyDebug msg="Dock_Probe moving from the dock to G0 Z{docklocation_z|int + dockmove_z|int} F{release_feedrate}"
	G0 Z{docklocation_z|int + dockmove_z|int} F{release_feedrate}
	{% endif %}
	
	_KlickyDebug msg="Dock_Probe moving from the dock to G0 X{docklocation_x|int + dockmove_x|int} Y{docklocation_y|int + dockmove_y|int} F{release_feedrate}"
	G0 X{docklocation_x|int + dockmove_x|int} Y{docklocation_y|int + dockmove_y|int} F{release_feedrate}
	
	
	_RetractKlickyDock
	
	
	_KlickyDebug msg="Dock_Probe moving away from the dock to G0 X{docklocation_x|int + dockmove_x|int - attachmove_x|int} Y{docklocation_y|int + dockmove_y|int - attachmove_y|int} F{release_feedrate}"
	G0 X{docklocation_x|int + dockmove_x|int - attachmove_x|int} Y{docklocation_y|int + dockmove_y|int - attachmove_y|int} F{release_feedrate}
	
	
	{% if (printer.gcode_move.gcode_position.z < safe_z) %}
	_KlickyDebug msg="Dock_Probe moving to a safe Z position: G0 Z{safe_z} F{z_drop_feedrate} from {printer.gcode_move.gcode_position.z}"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_Park_Toolhead
	
	G4 P1000
	_CheckProbe action=dock
	_KLICKY_STATUS_READY
	
	{% elif probe_lock %}
	{% if verbose %}
	{ action_respond_info("Probe locked") }
	{% endif %}
	
	
	_KlickyDebug msg="Dock_Probe probe locked not docking probe"
	_CheckProbe action=query
	
	{% else %}
	{% if verbose %}
	{ action_respond_info("Probe already docked") }
	{% endif %}
	
	
	_KlickyDebug msg="Dock_Probe probe already docked, doing nothing"
	_CheckProbe action=query
	
	{% endif %}
	
	_exit_point function=Dock_Probe move={goback}
	{% else %}
	_KlickyDebug msg="Dock_Probe probe docking bypassed, doing nothing"
	{% endif %}

[gcode_macro PROBE_CALIBRATE]
rename_existing = _PROBE_CALIBRATE
description = Calibrate the probes z_offset with klicky automount
gcode = 
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set max_x = printer["gcode_macro _User_Variables"].max_bed_x|float %}
	{% set max_y = printer["gcode_macro _User_Variables"].max_bed_y|float %}
	{% set probe_offset_x = printer['configfile'].config["probe"]["x_offset"]|float %}
	{% set probe_offset_y = printer['configfile'].config["probe"]["y_offset"]|float %}
	{% set bypass_probe_docking = printer["gcode_macro _User_Variables"].bypass_probe_docking|default(False) %}
	
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X, Y and Z Axis First!") }
	{% endif %}
	_KlickyDebug msg="probe_calibrate Axis homed"
	_KlickyDebug msg="probe_calibrate Variables max_x={max_x},max_y={max_y},probe_offset_x={probe_offset_x},probe_offset_y={probe_offset_y}"
	
	
	{% if printer['gcode_move'].position.y > (max_y - probe_offset_y)
	or printer['gcode_move'].position.y < - probe_offset_y
	or printer['gcode_move'].position.x > (max_x - probe_offset_x)
	or printer['gcode_move'].position.x < - probe_offset_x %}
	{ action_raise_error("Must perform PROBE_CALIBRATE with the probe above the BED, check klicky_variables bed size!") }
	{% endif %}
	
	{% if bypass_probe_docking == False %}
	_CheckProbe action=query
	G90
	Attach_Probe back=1
	_KLICKY_STATUS_CALIBRATING_Z
	
	_KlickyDebug msg="probe_calibrate calling klipper probe_calibrate"
	_PROBE_CALIBRATE {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	M118 moving the toolhead 20 mm from the bed
	_KlickyDebug msg="probe_calibrate Moving Z up by 20mm"
	TESTZ Z=20
	M118 remove manually the probe and continue calibration
	_KLICKY_STATUS_READY
	{% else %}
	_KLICKY_STATUS_CALIBRATING_Z
	_KlickyDebug msg="probe_calibrate calling klipper probe_calibrate"
	_PROBE_CALIBRATE {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	_KLICKY_STATUS_READY
	{% endif %}

[gcode_macro PROBE_ACCURACY]
rename_existing = _PROBE_ACCURACY
description = Probe Z-height accuracy at current XY position with klicky automount
gcode = 
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set max_x = printer["gcode_macro _User_Variables"].max_bed_x|float %}
	{% set max_y = printer["gcode_macro _User_Variables"].max_bed_y|float %}
	{% set probe_offset_x = printer['configfile'].config["probe"]["x_offset"]|float %}
	{% set probe_offset_y = printer['configfile'].config["probe"]["y_offset"]|float %}
	
	{% if not 'xyz' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X, Y and Z Axis First!") }
	{% endif %}
	_KlickyDebug msg="probe_accuracy Axis homed"
	_KlickyDebug msg="probe_accuracy Variables max_x={max_x},max_y={max_y},probe_offset_x={probe_offset_x},probe_offset_y={probe_offset_y}"
	
	_entry_point function=PROBE_ACCURACY
	
	
	{% if printer['gcode_move'].position.y > (max_y - probe_offset_y)
	or printer['gcode_move'].position.y < - probe_offset_y
	or printer['gcode_move'].position.x > (max_x - probe_offset_x)
	or printer['gcode_move'].position.x < - probe_offset_x %}
	{ action_raise_error("Must perform PROBE_ACCURACY with the probe above the BED, check klicky_variables bed size!") }
	{% endif%}
	
	_CheckProbe action=query
	Attach_Probe back=1
	
	_KlickyDebug msg="probe_accuracy calling klipper probe accuracy"
	_PROBE_ACCURACY {% for p in params
	%}{'%s=%s ' % (p, params[p])}{%
	endfor %}
	
	Dock_Probe back=1
	
	_exit_point function=PROBE_ACCURACY move=1

[force_move]
enable_force_move = True

[homing_override]
axes = xyz
gcode = 
	
	_User_Variables
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z %}
	{% set enable_z_hop = printer["gcode_macro _User_Variables"].enable_z_hop %}
	{% set kinematic_z = 0 %}
	{% set dock_on_zhome = printer["gcode_macro _User_Variables"].dock_on_zhome|default(True) %}
	{% set attachmove_x = printer["gcode_macro _User_Variables"].attachmove_x|default(0) %}
	{% set attachmove_y = printer["gcode_macro _User_Variables"].attachmove_y|default(0) %}
	{% set attachmove_z = printer["gcode_macro _User_Variables"].attachmove_z|default(0) %}
	{% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set home_backoff_x = printer["gcode_macro _User_Variables"].home_backoff_x|default(0) %}
	{% set home_backoff_y = printer["gcode_macro _User_Variables"].home_backoff_y|default(0) %}
	{% set override_homing = printer["gcode_macro _User_Variables"].override_homing|default('') %}
	
	
	_klicky_check_variables_version
	
	_CheckProbe action=query
	
	
	{% set home_x, home_y, home_z, leave_probe_attached = False, False, False, False %}
	
	{% if 'PROBE_LOCK' in params%}
	{% if verbose %}
	{ action_respond_info("PROBE_LOCK = True") }
	{% endif %}
	{% set leave_probe_attached = True %}
	{% endif %}
	
	
	{% if not 'X' in params
	and not 'Y' in params
	and not 'Z' in params %}
	
	{% set home_x, home_y, home_z = True, True, True %}
	_KlickyDebug msg="homing_override goint to home all axes"
	
	{% else %}
	{% if 'X' in params %}
	{% set home_x = True %}
	_KlickyDebug msg="homing_override goint to home X"
	
	{% endif %}
	
	{% if 'Y' in params %}
	{% set home_y = True %}
	_KlickyDebug msg="homing_override goint to home Y"
	{% endif %}
	
	{% if 'Z' in params %}
	{% set home_z = True %}
	_KlickyDebug msg="homing_override goint to home Z"
	{% endif %}
	
	{% if 'X' in params
	and 'Y' in params
	and 'Z' in params %}
	
	
	_Homing_Variables reset=1
	_KlickyDebug msg="homing_override goint to home all axes"
	{% endif %}
	
	{% endif %}
	
	_entry_point function=homing_override
	_KLICKY_STATUS_HOMING
	
	
	{% if 'z' not in printer.toolhead.homed_axes %}
	{% if enable_z_hop == False %}
	_KlickyDebug msg="homing_override z_hop disabled"
	
	{% set kinematic_z = safe_z %}
	{% set safe_z = safe_z %}
	{% endif %}
	{% endif %}
	
	
	{% if 'x' not in printer.toolhead.homed_axes and 'y' not in printer.toolhead.homed_axes and 'z' not in printer.toolhead.homed_axes%}
	{% if verbose %}
	{ action_respond_info("No axis homed") }
	{% endif %}
	_KlickyDebug msg="homing_override no axis homed, setting position as X=Y=0 Z={kinematic_z}"
	SET_KINEMATIC_POSITION X=0 Y=0 Z={kinematic_z}
	M400
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% if home_z != True %}
	_KlickyDebug msg="homing_override clearing axis homed state if not already homing Z"
	M84
	{% endif %}
	{% endif %}
	
	{% if home_z %}
	{% if 'x' not in printer.toolhead.homed_axes and 'y' not in printer.toolhead.homed_axes%}
	{% if verbose %}
	{ action_respond_info("X or Y not homed, forcing full G28") }
	{% endif %}
	{% set home_x, home_y, home_z = True, True, True %}
	{% endif %}
	{% endif %}
	
	
	{% if ((attachmove_y == 0 and override_homing == '' ) or (override_homing == 'Y'))%}
	
	{% if home_y %}
	{% if override_homing == 'Y' %}
	_KlickyDebug msg="homing_override Y homing first override, due to override_homing = Y"
	{% else %}
	_KlickyDebug msg="homing_override Y homing first override, due to attachmove_y = 0"
	{% endif %}
	{% if verbose %}
	{ action_respond_info("Homing Y") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in Y homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	{% if printer["gcode_macro _HOME_Y"] is defined %}
	_KlickyDebug msg="homing_override calling _HOME_Y external script to handle the Y homing"
	_HOME_Y
	{% else %}
	_KlickyDebug msg="homing_override Homing Y G28 Y0"
	G28 Y0
	
	{% if home_backoff_y != 0 %}
	{% if (printer.configfile.settings.stepper_y.position_endstop > (printer.configfile.settings.stepper_y.position_min|default(0) + printer.configfile.settings.stepper_y.position_max)/2) %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop-home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop - home_backoff_y|int} F{travel_feedrate}
	{% else %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}
	{%endif %}
	{%endif %}
	{% endif %}
	{% endif %}
	{% set home_y = False %}
	{% endif %}
	
	
	
	{% if home_x %}
	{% if verbose %}
	{ action_respond_info("Homing X") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in X homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	{% if printer["gcode_macro _HOME_X"] is defined %}
	_KlickyDebug msg="homing_override calling _HOME_X external script to handle the X homing"
	_HOME_X
	{% else %}
	_KlickyDebug msg="homing_override Homing X, G28 X0"
	G28 X0
	
	{% if home_backoff_x != 0 %}
	{% if (printer.configfile.settings.stepper_x.position_endstop > (printer.configfile.settings.stepper_x.position_min|default(0) + printer.configfile.settings.stepper_x.position_max)/2) %}
	_KlickyDebug msg="homing_override backing off X endstop, G0 X{printer.configfile.settings.stepper_x.position_endstop - home_backoff_x|int} F{travel_feedrate}"
	G0 X{printer.configfile.settings.stepper_x.position_endstop - home_backoff_x|int} F{travel_feedrate}
	{% else %}
	_KlickyDebug msg="homing_override backing off X endstop, G0 X{printer.configfile.settings.stepper_x.position_endstop + home_backoff_x|int} F{travel_feedrate}"
	G0 X{printer.configfile.settings.stepper_x.position_endstop + home_backoff_x|int} F{travel_feedrate}
	{%endif %}
	{%endif %}
	{% endif %}
	{% endif %}
	
	
	{% if home_y %}
	{% if verbose %}
	{ action_respond_info("Homing Y") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in Y homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	{% if printer["gcode_macro _HOME_Y"] is defined %}
	_KlickyDebug msg="homing_override calling _HOME_Y external script to handle the Y homing"
	_HOME_Y
	{% else %}
	_KlickyDebug msg="homing_override Homing Y, G28 Y0"
	G28 Y0
	{% if home_backoff_y != 0 %}
	{% if (printer.configfile.settings.stepper_y.position_endstop > (printer.configfile.settings.stepper_y.position_min|default(0) + printer.configfile.settings.stepper_y.position_max)/2) %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop - home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop - home_backoff_y|int} F{travel_feedrate}
	{% else %}
	_KlickyDebug msg="homing_override backing off Y endstop, G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}"
	G0 Y{printer.configfile.settings.stepper_y.position_endstop + home_backoff_y|int} F{travel_feedrate}
	{%endif %}
	{%endif %}
	{% endif %}
	{% endif %}
	
	{% if home_z %}
	{% if verbose %}
	{ action_respond_info("Homing Z") }
	{% endif %}
	{% if 'z' in printer.toolhead.homed_axes %}
	_KlickyDebug msg="homing_override moving toolhead to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm in Y homing seq"
	{% if verbose %}
	{ action_respond_info("moving to a safe Z distance") }
	{% endif %}
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	
	{% if 'z_virtual_endstop' in printer['configfile'].config["stepper_z"]["endstop_pin"] %}
	_KlickyDebug msg="homing_override probe configured as a virtual Z endstop attaching probe"
	Attach_Probe
	
	{% if leave_probe_attached %}
	_Probe_Lock
	{% endif %}
	{% elif dock_on_zhome == True %}
	Dock_Probe
	{% endif %}
	
	_Home_Z_
	
	
	{% if 'z_virtual_endstop' in printer['configfile'].config["stepper_z"]["endstop_pin"] %}
	_KlickyDebug msg="homing_override probe no longer required, docking probe"
	Dock_Probe
	{% elif dock_on_zhome == False %}
	Dock_Probe
	{% endif %}
	{% endif %}
	_CheckProbe action=query
	
	
	_Park_Toolhead
	
	_exit_point function=homing_override
	_KLICKY_STATUS_READY

[gcode_macro _Umbilical_Path]
gcode = 
	{% set umbilical = printer["gcode_macro _User_Variables"].umbilical %}
	{% set umbilical_x = printer["gcode_macro _User_Variables"].umbilical_x %}
	{% set umbilical_y = printer["gcode_macro _User_Variables"].umbilical_y %}
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	
	{% if umbilical %}
	
	_entry_point function=Umbilical_Path
	
	_KlickyDebug msg="_Umbilical_Path moving to G0 X{umbilical_x} Y{umbilical_y} Z{safe_z} F{travel_feedrate}"
	G0 X{umbilical_x} Y{umbilical_y} Z{safe_z} F{travel_feedrate}
	
	_exit_point function=Umbilical_Path
	{% endif %}

[gcode_macro _Home_Z_]
gcode = 
	{% set z_endstop_x = printer["gcode_macro _Probe_Variables"].z_endstop_x %}
	{% set z_endstop_y = printer["gcode_macro _Probe_Variables"].z_endstop_y %}
	{% set safe_z = printer["gcode_macro _User_Variables"].safe_z|float %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}    {% set z_drop_feedrate = printer["gcode_macro _User_Variables"].z_drop_speed * 60 %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	_entry_point function=Home_Z
	
	
	{% if not 'xy' in printer.toolhead.homed_axes %}
	{ action_raise_error("Must Home X and Y Axis First!") }
	{% else %}
	_KlickyDebug msg="_Home_Z_ XY Axis homed"
	{% if not 'z' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Resetting Z position to zero") }
	{% endif %}
	_KlickyDebug msg="_Home_Z_ Z not homed, setting position as X=Y=Z=0"
	SET_KINEMATIC_POSITION Z=0
	{% endif %}
	
	
	
	_KlickyDebug msg="_Home_Z_ moving to Z endstop position G0 X{z_endstop_x} Y{z_endstop_y} F{travel_feedrate}"
	G0 X{z_endstop_x} Y{z_endstop_y} F{travel_feedrate}
	_KlickyDebug msg="_Home_Z_ Homing Z G28 Z"
	G28 Z0
	_KlickyDebug msg="_Home_Z_ toolhead too low, raising it to {safe_z}mm from {printer.gcode_move.gcode_position.z}mm"
	G0 Z{safe_z} F{z_drop_feedrate}
	{% endif %}
	
	_exit_point function=Home_Z

[gcode_macro _CheckProbe]
variable_probe_state = 0
gcode = 
	Query_Probe
	_SetProbeState action={ params.ACTION }

[gcode_macro _SetProbeState]
gcode = 
	{% set query_probe_triggered = printer.probe.last_query %}
	{% set action  = params.ACTION|default('') %}
	
	
	{% if query_probe_triggered %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_attached VALUE={ False }
	{% else %}
	
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_attached VALUE={ True }
	{% endif %}
	
	{% if action == 'query' %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=probe_state VALUE={ query_probe_triggered }
	{% endif %}
	
	
	
	
	{% if not query_probe_triggered and action == 'dock' %}
	{ action_raise_error("Probe dock failed!") }
	{% endif %}
	
	
	{% if query_probe_triggered and action == 'attach' %}
	{ action_raise_error("Probe attach failed!") }
	{% endif %}

[gcode_macro _Park_Toolhead]
gcode = 
	{% set park_toolhead = printer["gcode_macro _User_Variables"].park_toolhead %}
	{% set parkposition_x = printer["gcode_macro _User_Variables"].parkposition_x %}
	{% set parkposition_y = printer["gcode_macro _User_Variables"].parkposition_y %}
	{% set parkposition_z = printer["gcode_macro _User_Variables"].parkposition_z %}
	{% set travel_feedrate = printer["gcode_macro _User_Variables"].travel_speed * 60 %}
	{% set verbose = printer["gcode_macro _User_Variables"].verbose %}
	
	_entry_point function=Park_Toolhead
	
	{% if park_toolhead and 'xyz' in printer.toolhead.homed_axes %}
	{% if verbose %}
	{ action_respond_info("Parking Toolhead") }
	{% endif %}
	{% if parkposition_z == -128 %}
	_KlickyDebug msg="_Park_Toolhead moving to G0 X{parkposition_x} Y{parkposition_y} F{travel_feedrate}"
	G0 X{parkposition_x} Y{parkposition_y} F{travel_feedrate}
	
	{% else %}
	
	_KlickyDebug msg="_Park_Toolhead moving to G0 X{parkposition_x} Y{parkposition_y} Z{parkposition_z} F{travel_feedrate}"
	G0 X{parkposition_x} Y{parkposition_y} Z{parkposition_z} F{travel_feedrate}
	
	{% endif %}
	
	{% endif %}
	_exit_point function=Park_Toolhead

[gcode_macro _klicky_status_ready]
gcode = 
	{% if printer['gcode_macro status_ready'] is defined %}
	_KlickyDebug msg="_klicky_status_ready activating the LED STATUS_READY"
	STATUS_READY
	{% endif %}

[gcode_macro _klicky_status_busy]
gcode = 
	{% if printer['gcode_macro status_busy'] is defined %}
	_KlickyDebug msg="_klicky_status_busy activating the LED STATUS_BUSY"
	STATUS_BUSY
	{% endif %}

[gcode_macro _klicky_status_leveling]
gcode = 
	{% if printer['gcode_macro status_leveling'] is defined %}
	_KlickyDebug msg="_klicky_status_leveling activating the LED STATUS_LEVELING"
	STATUS_LEVELING
	{% endif %}

[gcode_macro _klicky_status_homing]
gcode = 
	{% if printer['gcode_macro status_homing'] is defined %}
	_KlickyDebug msg="_klicky_status_homing activating the LED STATUS_HOMING"
	STATUS_HOMING
	{% endif %}

[gcode_macro _klicky_status_cleaning]
gcode = 
	{% if printer['gcode_macro status_cleaning'] is defined %}
	_KlickyDebug msg="_klicky_status_cleaning activating the LED STATUS_CLEANING"
	STATUS_CLEANING
	{% endif %}

[gcode_macro _klicky_status_meshing]
gcode = 
	{% if printer['gcode_macro status_meshing'] is defined %}
	_KlickyDebug msg="_klicky_status_meshing activating the LED STATUS_MESHING"
	STATUS_MESHING
	{% endif %}

[gcode_macro _klicky_status_calibrating_z]
gcode = 
	{% if printer['gcode_macro status_calibrating_z'] is defined %}
	_KlickyDebug msg="_klicky_status_calibrating_z activating the LED STATUS_CALIBRATING_Z"
	STATUS_CALIBRATING_Z
	{% endif %}

[z_calibration]
nozzle_xy_position = 172, 301
switch_xy_position = 171.5, 282
bed_xy_position = 150, 150
switch_offset = 0.09
offset_margins = -1.0,1.0
speed = 50
probing_first_fast = false
start_gcode = Attach_Probe
end_gcode = Dock_Probe

[mcu]
serial = /dev/serial/by-id/usb-Klipper_stm32f446xx_28003C001150535556323420-if00
restart_method = command

[printer]
kinematics = corexy
max_velocity = 300
max_accel = 3000
max_z_velocity = 15
max_z_accel = 350
square_corner_velocity = 5.0

[stepper_x]
step_pin = PF13
dir_pin = PF12
enable_pin = !PF14
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 400
endstop_pin = ^PG6
position_min = 0
position_endstop = 300
position_max = 300
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_x]
uart_pin = PC4
interpolate = False
run_current = 0.8
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_y]
step_pin = PG0
dir_pin = PG1
enable_pin = !PF15
rotation_distance = 40
microsteps = 32
full_steps_per_rotation = 400
endstop_pin = PG9
position_min = 0
position_endstop = 300
position_max = 303.5
homing_speed = 25
homing_retract_dist = 5
homing_positive_dir = true

[tmc2209 stepper_y]
uart_pin = PD11
interpolate = False
run_current = 0.8
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z]
step_pin = PF11
dir_pin = !PG3
enable_pin = !PG5
rotation_distance = 4
microsteps = 32
full_steps_per_rotation = 200
endstop_pin = PG10
position_max = 290
position_min = -4.5
homing_speed = 8.0
second_homing_speed = 3
homing_retract_dist = 3
position_endstop = -0.711

[tmc2209 stepper_z]
uart_pin = PC6
interpolate = False
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z1]
step_pin = PG4
dir_pin = !PC1
enable_pin = !PA0
rotation_distance = 4
microsteps = 32
full_steps_per_rotation = 200

[tmc2209 stepper_z1]
uart_pin = PC7
interpolate = False
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[stepper_z2]
step_pin = PF9
dir_pin = !PF10
enable_pin = !PG2
rotation_distance = 4
microsteps = 32
full_steps_per_rotation = 200

[tmc2209 stepper_z2]
uart_pin = PF2
interpolate = False
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[extruder]
step_pin = PC13
dir_pin = PF0
enable_pin = !PF1
rotation_distance = 21.9459674016
gear_ratio = 50:10
microsteps = 32
full_steps_per_rotation = 200
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PA1
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PF4
min_temp = 10
max_temp = 270
max_power = 1.0
min_extrude_temp = 170
pressure_advance = 0.05
pressure_advance_smooth_time = 0.040
control = pid
pid_kp = 26.572
pid_ki = 2.036
pid_kd = 86.691

[tmc2209 extruder]
uart_pin = PE4
interpolate = false
run_current = 0.5
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PA2
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PF3
max_power = 1
min_temp = 0
max_temp = 120
control = pid
pid_kp = 55.196
pid_ki = 2.091
pid_kd = 364.295

[probe]
pin = PG15
x_offset = 0
y_offset = 25.0
z_offset = 0
speed = 10.0
samples = 5
samples_result = median
sample_retract_dist = 3.0
samples_tolerance = 0.006
samples_tolerance_retries = 6

[fan]
pin = PA8
kick_start_time = 0.5
off_below = 0.10

[heater_fan hotend_fan]
pin = PE5
max_power = 1.0
kick_start_time = 0.5
heater = extruder
heater_temp = 50.0

[controller_fan controller_fan]
pin = PD12
kick_start_time = 0.5
heater = heater_bed

[heater_fan exhaust_fan]
pin = PD13
max_power = 1.0
shutdown_speed = 0.0
kick_start_time = 5.0
heater = heater_bed
heater_temp = 60
fan_speed = 1.0

[output_pin caselight]
pin = PD15
pwm = true
shutdown_value = 0
value = 1
cycle_time = 0.01

[neopixel headlight]
pin = PB0
chain_count = 3
color_order = GRBW
initial_red = 0.0
initial_green = 0.2157
initial_blue = 1.0
initial_white = 0.0

[temperature_sensor chamber_temp]
sensor_type = ATC Semitec 104NT-4-R025H42G
sensor_pin = PF5
min_temp = 0
max_temp = 100
gcode_id = chamber_th

[idle_timeout]
timeout = 1800

[z_tilt]
z_positions = 
	-50, 18
	150, 348
	350, 18
points = 
	30, 5
	150, 245
	270, 5
speed = 200
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.0075

[board_pins]
aliases = 
	
	EXP1_1=PE8, EXP1_2=PE7,
	EXP1_3=PE9, EXP1_4=PE10,
	EXP1_5=PE12, EXP1_6=PE13,
	EXP1_7=PE14, EXP1_8=PE15,
	EXP1_9=<GND>, EXP1_10=<5V>,
	
	
	EXP2_1=PA6, EXP2_2=PA5,
	EXP2_3=PB1, EXP2_4=PA4,
	EXP2_5=PB2, EXP2_6=PA7,
	EXP2_7=PC15, EXP2_8=<RST>,
	EXP2_9=<GND>, EXP2_10=<5V>

[gcode_macro _User_Variables]
variable_verbose = True
variable_debug = False
variable_travel_speed = 200
variable_move_accel = 1000
variable_dock_speed = 50
variable_release_speed = 75
variable_z_drop_speed = 20
variable_safe_z = 25
variable_enable_z_hop = True
variable_max_bed_y = 300
variable_max_bed_x = 300
variable_z_endstop_x = 172
variable_z_endstop_y = 301
variable_docklocation_x = 40.5
variable_docklocation_y = 303.5
variable_docklocation_z = -128
variable_enable_dock_servo = False
variable_servo_name = 'NAME'
variable_servo_deploy = 10
variable_servo_retract = 11
variable_servo_delay = 250
variable_dockmove_x = 40
variable_dockmove_y = 0
variable_dockmove_z = 0
variable_attachmove_x = 0
variable_attachmove_y = 30
variable_attachmove_z = 0
variable_umbilical = False
variable_umbilical_x = 15
variable_umbilical_y = 15
variable_park_toolhead = False
variable_parkposition_x = 125
variable_parkposition_y = 125
variable_parkposition_z = 30
variable_version = 1
variable_attachmove2_x = 0
variable_attachmove2_y = 0
variable_attachmove2_z = 0
variable_home_backoff_x = 10
variable_home_backoff_y = 10
variable_override_homing = ''
variable_dock_on_zhome = True
gcode = 
	{% set Mx = printer['configfile'].config["stepper_x"]["position_max"]|float %}
	{% set My = printer['configfile'].config["stepper_y"]["position_max"]|float %}
	{% set Ox = printer['configfile'].config["probe"]["x_offset"]|float %}
	{% set Oy = printer['configfile'].config["probe"]["y_offset"]|float %}
	{% set Oz = printer['configfile'].config["probe"]["z_offset"]|float %}
	
	
	{% if z_endstop_x != 0 or z_endstop_y != 0 %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_x VALUE={ z_endstop_x }
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_y VALUE={ z_endstop_y }
	
	
	{% else %}
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_x VALUE={ (Mx * 0.5) - Ox }
	SET_GCODE_VARIABLE MACRO=_Probe_Variables VARIABLE=z_endstop_y VALUE={ (My * 0.5) - Oy }
	{% endif %}

[gcode_macro PRINT_START]
gcode = 
	M117 Homing...
	G28
	ATTACH_PROBE
	Z_TILT_ADJUST
	DOCK_PROBE
	G28
	
	
	
	
	
	
	
	G0 X150 Y150 Z30 F3600

[gcode_macro PRINT_END]
gcode = 
	
	{% set th = printer.toolhead %}
	{% set x_safe = th.position.x + 20 * (1 if th.axis_maximum.x - th.position.x > 20 else -1) %}
	{% set y_safe = th.position.y + 20 * (1 if th.axis_maximum.y - th.position.y > 20 else -1) %}
	{% set z_safe = [th.position.z + 2, th.axis_maximum.z]|min %}
	
	SAVE_GCODE_STATE NAME=STATE_PRINT_END
	
	M400
	G92 E0
	G1 E-2.0 F3600
	
	TURN_OFF_HEATERS
	
	G90
	G0 X{x_safe} Y{y_safe} Z{z_safe} F20000
	G0 X{th.axis_maximum.x//2} Y{th.axis_maximum.y - 2} F3600
	M107
	
	BED_MESH_CLEAR
	RESTORE_GCODE_STATE NAME=STATE_PRINT_END
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
Loaded MCU 'mcu' 118 commands (v0.12.0-103-g6ce6fbbc / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c1a=PB8,PB9 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_i2c3=PA8,PC9 BUS_PINS_sdio=PC12,PD2,PC8,PC9,PC10,PC11 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 CLOCK_FREQ=180000000 MCU=stm32f446xx PWM_MAX=255 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
Starting heater checks for extruder
Stats 23.9: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=3136 bytes_read=6546 bytes_retransmit=9 bytes_invalid=0 send_seq=252 receive_seq=252 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180003179  heater_bed: target=0 temp=0.0 pwm=0.000 chamber_temp: temp=0.0 sysload=1.39 cputime=2.096 memavail=524028 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 24.9: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000008 bytes_write=3142 bytes_read=6667 bytes_retransmit=9 bytes_invalid=0 send_seq=253 receive_seq=253 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180002207  heater_bed: target=0 temp=22.7 pwm=0.000 chamber_temp: temp=22.3 sysload=1.39 cputime=2.100 memavail=516412 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.5 pwm=0.000
Stats 25.9: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000008 bytes_write=3148 bytes_read=6818 bytes_retransmit=9 bytes_invalid=0 send_seq=254 receive_seq=254 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999164  heater_bed: target=0 temp=22.7 pwm=0.000 chamber_temp: temp=22.3 sysload=1.28 cputime=2.103 memavail=514716 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.4 pwm=0.000
Stats 26.9: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000008 bytes_write=3154 bytes_read=6984 bytes_retransmit=9 bytes_invalid=0 send_seq=255 receive_seq=255 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179998609  heater_bed: target=0 temp=22.7 pwm=0.000 chamber_temp: temp=22.3 sysload=1.28 cputime=2.106 memavail=514516 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.4 pwm=0.000
webhooks client 548195212160: New connection
webhooks client 548195212160: Client info {'program': 'Moonraker', 'version': 'v0.8.0-310-g67c98f6'}
Stats 27.9: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000008 bytes_write=3160 bytes_read=7165 bytes_retransmit=9 bytes_invalid=0 send_seq=256 receive_seq=256 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999260  heater_bed: target=0 temp=22.8 pwm=0.000 chamber_temp: temp=22.3 sysload=1.28 cputime=2.114 memavail=514292 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.5 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 548195212160
webhooks: registering remote method 'reboot_machine' for connection id: 548195212160
webhooks: registering remote method 'pause_job_queue' for connection id: 548195212160
webhooks: registering remote method 'start_job_queue' for connection id: 548195212160
Stats 28.9: gcodein=0  mcu: mcu_awake=0.006 mcu_task_avg=0.000007 mcu_task_stddev=0.000008 bytes_write=3166 bytes_read=7316 bytes_retransmit=9 bytes_invalid=0 send_seq=257 receive_seq=257 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999977  heater_bed: target=0 temp=22.7 pwm=0.000 chamber_temp: temp=22.3 sysload=1.28 cputime=2.133 memavail=510632 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.4 pwm=0.000
Stats 29.9: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3172 bytes_read=7496 bytes_retransmit=9 bytes_invalid=0 send_seq=258 receive_seq=258 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180000205  heater_bed: target=0 temp=22.7 pwm=0.000 chamber_temp: temp=22.2 sysload=1.28 cputime=2.139 memavail=510148 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.5 pwm=0.000
Stats 30.9: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3178 bytes_read=7677 bytes_retransmit=9 bytes_invalid=0 send_seq=259 receive_seq=259 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180000456  heater_bed: target=0 temp=22.8 pwm=0.000 chamber_temp: temp=22.3 sysload=1.17 cputime=2.144 memavail=510148 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.5 pwm=0.000
Stats 31.9: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3184 bytes_read=7828 bytes_retransmit=9 bytes_invalid=0 send_seq=260 receive_seq=260 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=180000001  heater_bed: target=0 temp=22.7 pwm=0.000 chamber_temp: temp=22.4 sysload=1.17 cputime=2.148 memavail=510148 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.4 pwm=0.000
Stats 32.9: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3190 bytes_read=7994 bytes_retransmit=9 bytes_invalid=0 send_seq=261 receive_seq=261 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999733  heater_bed: target=0 temp=22.8 pwm=0.000 chamber_temp: temp=22.3 sysload=1.17 cputime=2.153 memavail=510148 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.5 pwm=0.000
Stats 33.9: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3196 bytes_read=8175 bytes_retransmit=9 bytes_invalid=0 send_seq=262 receive_seq=262 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999490  heater_bed: target=0 temp=22.7 pwm=0.000 chamber_temp: temp=22.4 sysload=1.17 cputime=2.161 memavail=509936 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.4 pwm=0.000
Stats 34.9: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3202 bytes_read=8340 bytes_retransmit=9 bytes_invalid=0 send_seq=263 receive_seq=263 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999521  heater_bed: target=0 temp=22.8 pwm=0.000 chamber_temp: temp=22.3 sysload=1.17 cputime=2.171 memavail=508484 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.5 pwm=0.000
Stats 35.9: gcodein=0  mcu: mcu_awake=0.001 mcu_task_avg=0.000005 mcu_task_stddev=0.000004 bytes_write=3208 bytes_read=8521 bytes_retransmit=9 bytes_invalid=0 send_seq=264 receive_seq=264 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=179999689  heater_bed: target=0 temp=22.8 pwm=0.000 chamber_temp: temp=22.3 sysload=1.48 cputime=2.191 memavail=508484 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.5 pwm=0.000
